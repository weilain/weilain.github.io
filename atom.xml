<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>hermoso</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://www.webpages.show/"/>
  <updated>2020-08-17T03:17:44.774Z</updated>
  <id>https://www.webpages.show/</id>
  
  <author>
    <name>Hermoso</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>软著申请统计代码行数</title>
    <link href="https://www.webpages.show/p/c6a81268/"/>
    <id>https://www.webpages.show/p/c6a81268/</id>
    <published>2020-08-17T03:12:24.108Z</published>
    <updated>2020-08-17T03:17:44.774Z</updated>
    
    <content type="html"><![CDATA[<hr><p>title: 软著申请统计代码行数<br>date: null<br>categories:</p><ul><li>script<br>tags:</li><li>shell<br>abbrlink: null</li></ul><hr><h3><span id="请统计代码行数">请统计代码行数</span></h3><h4><span id="统计代码行数">统计代码行数</span></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find mall-imeihao-h5      \( -name &#39;*.js&#39; -o -name &#39;*.json&#39; -o -name &#39;*.wxss&#39; -o -name &#39;*.wxml&#39; \) | xargs cat |grep -v ^$| wc -l</span><br></pre></td></tr></table></figure><ul><li>.wxml .wxss .json .js 为源码文件扩展名，根据需求替换</li></ul><h4><span id="需要排除的目录">需要排除的目录</span></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">find  mall-imeihao \</span><br><span class="line">\( -path .&#x2F;web -o -path .&#x2F;runtime -o -path .&#x2F;config \) -prune -o \</span><br><span class="line">\( -name &quot;*.php&quot; -o -name &quot;*.js&quot; -o -name &quot;*.css&quot; -o -name &quot;*.scss&quot; \) \</span><br><span class="line">|  xargs cat |grep -v ^$| wc -l</span><br></pre></td></tr></table></figure><ul><li>web runtime config 为需要排除的目录</li></ul><h3><span id="导入文档">导入文档</span></h3><h4><span id="导入文档格式">导入文档格式</span></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find mall-imeihao-reception  \( -name &#39;*.py&#39;  \) | xargs cat |grep -v ^$| &gt; mall-imeihao-reception.docx</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;hr&gt;
&lt;p&gt;title: 软著申请统计代码行数&lt;br&gt;date: null&lt;br&gt;categories:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;script&lt;br&gt;tags:&lt;/li&gt;
&lt;li&gt;shell&lt;br&gt;abbrlink: null&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3&gt;&lt;sp
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>linux查看磁盘使用情况命令</title>
    <link href="https://www.webpages.show/p/59ce9c6a/"/>
    <id>https://www.webpages.show/p/59ce9c6a/</id>
    <published>2020-08-14T08:37:58.379Z</published>
    <updated>2020-08-14T08:48:17.766Z</updated>
    
    <content type="html"><![CDATA[<h3><span id="统一磁盘整体情况包括磁盘大小已使用可用">统一磁盘整体情况，包括磁盘大小，已使用，可用</span></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df -hT</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@campus ~]# df -hT</span><br><span class="line">Filesystem     Type      Size  Used Avail Use% Mounted on</span><br><span class="line">&#x2F;dev&#x2F;vda1      ext4       40G   28G   11G  73% &#x2F;</span><br><span class="line">devtmpfs       devtmpfs  7.8G     0  7.8G   0% &#x2F;dev</span><br><span class="line">tmpfs          tmpfs     7.8G     0  7.8G   0% &#x2F;dev&#x2F;shm</span><br><span class="line">tmpfs          tmpfs     7.8G  1.8M  7.8G   1% &#x2F;run</span><br><span class="line">tmpfs          tmpfs     7.8G     0  7.8G   0% &#x2F;sys&#x2F;fs&#x2F;cgroup</span><br><span class="line">tmpfs          tmpfs     1.6G     0  1.6G   0% &#x2F;run&#x2F;user&#x2F;1002</span><br><span class="line">tmpfs          tmpfs     1.6G     0  1.6G   0% &#x2F;run&#x2F;user&#x2F;0</span><br></pre></td></tr></table></figure><h3><span id="查看指定目录">查看指定目录</span></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df -h &#x2F;usr&#x2F;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@campus ~]# df -h &#x2F;usr&#x2F;</span><br><span class="line">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="line">&#x2F;dev&#x2F;vda1        40G   28G   11G  73% &#x2F;</span><br></pre></td></tr></table></figure><h3><span id="具体查看文件夹的占用情况">具体查看文件夹的占用情况</span></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">du --max-depth&#x3D;1 -h</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@campus ~]# du --max-depth&#x3D;1 -h</span><br><span class="line">8.0K.&#x2F;.docker</span><br><span class="line">688M.&#x2F;logs</span><br><span class="line">12K.&#x2F;.oracle_jre_usage</span><br><span class="line">12K.&#x2F;.ssh</span><br><span class="line">16K.&#x2F;.local</span><br><span class="line">2.3G.&#x2F;.m2</span><br><span class="line">40K.&#x2F;.java</span><br><span class="line">2.5G</span><br></pre></td></tr></table></figure><h3><span id="计算文件夹大小">计算文件夹大小</span></h3><p>快算显示目录整体占用大小,想查看指定目录，直接在命令后根目录即可.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">du -sh</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@campus ~]# du -sh &#x2F;usr&#x2F;</span><br><span class="line">5.1G&#x2F;usr&#x2F;</span><br></pre></td></tr></table></figure><blockquote><p>注：其中<code>df -h</code>和<code>du -sh</code>使用较多，一个统计整体磁盘情况，一个看单独目录点用情况.<br>命令<code>du --max-depth=1 -h</code>查看了目录下文件夹占用情况，使用较少，可以用<code>du -sh</code>代替.</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3&gt;&lt;span id=&quot;统一磁盘整体情况包括磁盘大小已使用可用&quot;&gt;统一磁盘整体情况，包括磁盘大小，已使用，可用&lt;/span&gt;&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;spa
      
    
    </summary>
    
    
      <category term="linux" scheme="https://www.webpages.show/categories/linux/"/>
    
    
      <category term="linux" scheme="https://www.webpages.show/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>Gitlab 403 forbidden</title>
    <link href="https://www.webpages.show/p/12130977/"/>
    <id>https://www.webpages.show/p/12130977/</id>
    <published>2020-08-14T08:29:35.698Z</published>
    <updated>2020-08-14T08:53:56.853Z</updated>
    
    <content type="html"><![CDATA[<p>搭建的Gitlab。但今天打开页面的时候显示的是空白页面，上面还有一次文本<code>Forbidden</code>。</p><img src= "/img/loading.gif" data-src="http://qiniu.webpages.show/images/1597393811426.jpg"><h3><span id="原因">原因：</span></h3><pre><code>Gitlab使用rack_attack做了并发访问的限制。</code></pre><h3><span id="解决方案">解决方案：</span></h3><p>将Gitlab的IP设置为白名单即可。<br>步骤如下：<br>    * 打开<code>/etc/gitlab/gitlab.rb</code>文件。<br>    * 查找gitlab_rails[‘<code>rack_attack_git_basic_auth</code>‘]关键词。<br>    * 取消注释<br>    * 修改ip_whitelist白名单属性，加入Gitlab部署的IP地址。<br>        <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">gitlab_rails[&#39;rack_attack_git_basic_auth&#39;] &#x3D; &#123;</span><br><span class="line"> &#39;enabled&#39; &#x3D;&gt; true,</span><br><span class="line"> &#39;ip_whitelist&#39; &#x3D;&gt; [&quot;127.0.0.1&quot;,&quot;Gitlab部署的IP地址&quot;],</span><br><span class="line"> &#39;maxretry&#39; &#x3D;&gt; 300,</span><br><span class="line"> &#39;findtime&#39; &#x3D;&gt; 5,</span><br><span class="line"> &#39;bantime&#39; &#x3D;&gt; 60</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure></p><ul><li>配置好后，执行gitlab-ctl reconfigure即可。</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;搭建的Gitlab。但今天打开页面的时候显示的是空白页面，上面还有一次文本&lt;code&gt;Forbidden&lt;/code&gt;。&lt;/p&gt;
&lt;img src= &quot;/img/loading.gif&quot; data-src=&quot;http://qiniu.webpages.show/images
      
    
    </summary>
    
    
      <category term="Gitlab" scheme="https://www.webpages.show/categories/Gitlab/"/>
    
    
      <category term="Gitlab" scheme="https://www.webpages.show/tags/Gitlab/"/>
    
  </entry>
  
  <entry>
    <title>查询DNS的记录 查看域名解析是否正常</title>
    <link href="https://www.webpages.show/p/3d65889c/"/>
    <id>https://www.webpages.show/p/3d65889c/</id>
    <published>2020-08-14T08:20:39.053Z</published>
    <updated>2020-08-14T08:48:17.767Z</updated>
    
    <content type="html"><![CDATA[<p>#nslookup命令用于查询DNS的记录，查看域名解析是否正常，在网络故障的时候用来诊断网络问题。</p><h4><span id="直接查询">直接查询</span></h4><p>查询一个域名的A记录</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nslookup domain [dns-server]</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">nslookup www.google.com 8.8.8.8</span><br><span class="line">Server:8.8.8.8</span><br><span class="line">Address:8.8.8.8#53</span><br><span class="line"></span><br><span class="line">Non-authoritative answer:</span><br><span class="line">Name:www.google.com</span><br><span class="line">Address: 172.217.5.196</span><br></pre></td></tr></table></figure><h4><span id="查询其他记录">查询其他记录</span></h4><p>指定参数，查询其他记录</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nslookup -qt&#x3D;type domain [dns-server]</span><br></pre></td></tr></table></figure><p>其中，type可以是以下这些类型：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">A 地址记录</span><br><span class="line">AAAA 地址记录</span><br><span class="line">AFSDB Andrew文件系统数据库服务器记录</span><br><span class="line">ATMA ATM地址记录</span><br><span class="line">CNAME 别名记录</span><br><span class="line">HINFO 硬件配置记录，包括CPU、操作系统信息</span><br><span class="line">ISDN 域名对应的ISDN号码</span><br><span class="line">MB 存放指定邮箱的服务器</span><br><span class="line">MG 邮件组记录</span><br><span class="line">MINFO 邮件组和邮箱的信息记录</span><br><span class="line">MR 改名的邮箱记录</span><br><span class="line">MX 邮件服务器记录</span><br><span class="line">NS 名字服务器记录</span><br><span class="line">PTR 反向记录</span><br><span class="line">RP 负责人记录</span><br><span class="line">RT 路由穿透记录</span><br><span class="line">SRV TCP服务器信息记录</span><br><span class="line">TXT 域名对应的文本信息</span><br><span class="line">X25 域名对应的X.25地址记录</span><br></pre></td></tr></table></figure><h4><span id="查询更具体的信息">查询更具体的信息</span></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nslookup –d [其他参数] domain [dns-server]</span><br></pre></td></tr></table></figure><p>只要在查询的时候，加上-d参数，即可查询域名的缓存。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;#nslookup命令用于查询DNS的记录，查看域名解析是否正常，在网络故障的时候用来诊断网络问题。&lt;/p&gt;
&lt;h4&gt;&lt;span id=&quot;直接查询&quot;&gt;直接查询&lt;/span&gt;&lt;/h4&gt;&lt;p&gt;查询一个域名的A记录&lt;/p&gt;
&lt;figure class=&quot;highlight pla
      
    
    </summary>
    
    
      <category term="tools" scheme="https://www.webpages.show/categories/tools/"/>
    
    
      <category term="nslookup" scheme="https://www.webpages.show/tags/nslookup/"/>
    
  </entry>
  
  <entry>
    <title>HTTrack - 克隆任意网站</title>
    <link href="https://www.webpages.show/p/8a11f10a/"/>
    <id>https://www.webpages.show/p/8a11f10a/</id>
    <published>2020-08-12T06:55:25.216Z</published>
    <updated>2020-08-14T08:48:17.763Z</updated>
    
    <content type="html"><![CDATA[<p>HTTrack可以克隆指定网站－把整个网站下载到本地。</p><p>可以用在离线浏览上，也可以用来收集信息（甚至有网站使用隐藏的密码文件）。</p><p>一些仿真度极高的伪网站（为了骗取用户密码），也是使用类似工具做的。<br>Linux默认安装了HTTrack. 如没有可以自行下载安装。<br>Liunx 安装：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum provides httrack</span><br><span class="line">yum install httrack</span><br></pre></td></tr></table></figure><p>MacOS zsh:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install httrack</span><br></pre></td></tr></table></figure><p>HTTrack帮助：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">httrack --help</span><br></pre></td></tr></table></figure><p>使用示例:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">httrack https:&#x2F;&#x2F;www.webpages.show&#x2F;navi -O &#x2F;tmp</span><br></pre></td></tr></table></figure><p>上面命令克隆了网站路径下所有内容，不带路径克隆所有内容</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;HTTrack可以克隆指定网站－把整个网站下载到本地。&lt;/p&gt;
&lt;p&gt;可以用在离线浏览上，也可以用来收集信息（甚至有网站使用隐藏的密码文件）。&lt;/p&gt;
&lt;p&gt;一些仿真度极高的伪网站（为了骗取用户密码），也是使用类似工具做的。&lt;br&gt;Linux默认安装了HTTrack. 如没
      
    
    </summary>
    
    
      <category term="tools" scheme="https://www.webpages.show/categories/tools/"/>
    
    
      <category term="HTTrack" scheme="https://www.webpages.show/tags/HTTrack/"/>
    
  </entry>
  
  <entry>
    <title>hexo 添加自定义单静态页面 跳过hexo渲染</title>
    <link href="https://www.webpages.show/p/6ea05e36/"/>
    <id>https://www.webpages.show/p/6ea05e36/</id>
    <published>2020-08-10T07:00:09.177Z</published>
    <updated>2020-08-10T07:43:18.032Z</updated>
    
    <content type="html"><![CDATA[<h3><span id="前言">前言</span></h3><p>Hexo默认会对<code>/source/</code>里的所有页面应用主题模板渲染，但有一些前端作品或demo页我们不希望经过渲染，而是能保持完全自定义的样子</p><p>例如：</p><ol><li>主题内渲染，添加的模块仍在主题内，主题头部信息依然存在，仅仅是在特定区域进行渲染（适合添加 about 页面）</li><li>完全页面渲染，在主题内点击对应链接跳转到一个完全崭新的页面（我需要的）</li></ol><h3><span id="hexo-的执行逻辑">hexo 的执行逻辑</span></h3><p>source 文件夹下存放了待被转化的 markdown 文件，在执行<code>hexo g</code>命令时，source 目录下的文件将被转化为 html 文件。</p><h3><span id="介绍两种方法">介绍两种方法：</span></h3><p>一. 使用Hexo提供的跳过渲染配置，适用于整个目录的设置。</p><p>具体步骤，打开博客根目录<code>_config.yml</code>，找到其中<code>skip_render</code>项，这个项目用来配置<code>/source/</code>中需要跳过渲染的文件或目录，</p><p>例如希望跳过<code>/source/navi/</code>里的所有文件渲染（这样我们就可以将自己的作品放在这个文件夹中，然后可以通过自己的网址/navi/…访问了)</p><p>可以配置为：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">skip_render: navi&#x2F;**</span><br></pre></td></tr></table></figure><ul><li><code>source/navi/</code>目录下添加「工具盒」源文件</li><li>在站点配置文件<code>_config.yml</code>中配置<code>skin_render</code>项，如：<code>skip_render: navi/**</code>，这样projects文件夹下的所以文件内容将不会转化为 html，直接被 copy 到 public 文件夹</li><li>在「工具盒」文件夹下添加 index.html 文件用于渲染自定义页面</li></ul><p>完成以上步骤即可点击「工具盒」菜单导航，完成自定义页面的展示。</p><p>修改了配置但生成出来的内容不一定及时应用了新配置，最好在生成之前执行一下<code>hexo clean</code>命令，清除掉旧的生成文件和缓存。</p><p>二. 给单个文件添加不应用模板的标记，适用于个别特殊文件的处理。</p><p>例如我们要使 <code>about</code> 页面跳过渲染，创建 <code>/source/about/index.md</code>，将这个页面的相关 HTML 代码写进<code>.md</code>文件并保存，然后在 <code>index.md</code> 的头部写入：，</p><p>避免渲染的办法就是在文件头部<code>Front-matter</code>里添加如下内容：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">layout: false</span><br><span class="line">---</span><br><span class="line">&#123;% raw %&#125;</span><br><span class="line">xxxxxxxxxxxxx</span><br><span class="line">xx HTML代码 xx</span><br><span class="line">xxxxxxxxxxxxx</span><br><span class="line">&#123;% endraw %&#125;</span><br></pre></td></tr></table></figure><blockquote><p>PS：<code>Front-matter</code> 是 <code>.md</code> 文件最上方以 — 分隔的区域，用于指定个别文件的变量，官方文档：<a href="https://hexo.io/docs/front-matter" target="_blank" rel="noopener">https://hexo.io/docs/front-matter</a><br><code>.md</code>文件中的 HTML 代码要用 <code>` 和 `</code> 包起来，使其能正确编译里面的代码　　</p></blockquote><p>这样，这个文件就不会经过模板渲染，最终发布到<code>/public/</code>里的文件就是去掉标记后的文件的样子。</p><p>但是这种未尝试！ 推荐第一种</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3&gt;&lt;span id=&quot;前言&quot;&gt;前言&lt;/span&gt;&lt;/h3&gt;&lt;p&gt;Hexo默认会对&lt;code&gt;/source/&lt;/code&gt;里的所有页面应用主题模板渲染，但有一些前端作品或demo页我们不希望经过渲染，而是能保持完全自定义的样子&lt;/p&gt;
&lt;p&gt;例如：&lt;/p&gt;
&lt;ol&gt;
&lt;li
      
    
    </summary>
    
    
      <category term="hexo" scheme="https://www.webpages.show/categories/hexo/"/>
    
    
      <category term="hexo" scheme="https://www.webpages.show/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>hexo修剪地址栏</title>
    <link href="https://www.webpages.show/p/292fbf59/"/>
    <id>https://www.webpages.show/p/292fbf59/</id>
    <published>2020-08-05T07:44:19.290Z</published>
    <updated>2020-08-05T07:53:06.966Z</updated>
    
    <content type="html"><![CDATA[<h3><span id="前言">前言</span></h3><p>hexo文章链接默认的生成规则是：<code>:year/:month/:day/:title</code>是按照年、月、日、标题来生成的</p><p>比如默认生成：<code>https://www.webpages.show/2020/07/21/hello-world/</code></p><p>非常不利于阅读,中文也可能出现乱码,也影响收录。</p><p>一种解决方案是：使用<code>hexo-permalink-pinyin</code>插件，将中文转英文，好像是有缺陷</p><p>另一种方案: 使用 <code>hexo-abbrlink</code> 插件, 生成短链，且链接不会因为更新次数过多出现改动</p><h3><span id="安装插件">安装插件</span></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install hexo-abbrlink --save</span><br></pre></td></tr></table></figure><h3><span id="配置">配置</span></h3><p>修改根目录站点配置文件<code>config.yml</code>，改为：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#permalink: :year&#x2F;:month&#x2F;:day&#x2F;:title&#x2F;  # 注释或者删除</span><br><span class="line">permalink: p&#x2F;:abbrlink&#x2F;  # 此处可以自己设置，也可以直接使用 :&#x2F;abbrlink ，建议前面带目录，不然太乱</span><br><span class="line">abbrlink:</span><br><span class="line">    alg: crc32  #算法： crc16(default) and crc32</span><br><span class="line">    rep: hex  #进制： dec(default) and hex</span><br></pre></td></tr></table></figure><p>生成的链接将会是这样的(官方样例)：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">crc16 &amp; hex</span><br><span class="line">https:&#x2F;&#x2F;post.zz173.com&#x2F;p&#x2F;66c8.html</span><br><span class="line"></span><br><span class="line">crc16 &amp; dec</span><br><span class="line">https:&#x2F;&#x2F;post.zz173.com&#x2F;p&#x2F;65535.html</span><br><span class="line">crc32 &amp; hex</span><br><span class="line">https:&#x2F;&#x2F;post.zz173.com&#x2F;p&#x2F;8ddf18fb.html</span><br><span class="line"></span><br><span class="line">crc32 &amp; dec</span><br><span class="line">https:&#x2F;&#x2F;post.zz173.com&#x2F;p&#x2F;1690090958.html</span><br></pre></td></tr></table></figure><h3><span id="使用">使用</span></h3><p>在文章的 <code>Front-matter</code> 内会增加<code>abbrlink</code> 字段，值为生成的ID 。这个字段确保了在我们修改了<code>Front-matter</code> 内的博客标题<code>title</code>或创建日期<code>date</code>字段之后而不会改变链接地址。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title:</span><br><span class="line">date:</span><br><span class="line">categories:</span><br><span class="line"> -</span><br><span class="line">tags:</span><br><span class="line">-</span><br><span class="line">abbrlink:  #留空就好，会自动生成，并不会因下次更新文章而变动</span><br><span class="line">---</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3&gt;&lt;span id=&quot;前言&quot;&gt;前言&lt;/span&gt;&lt;/h3&gt;&lt;p&gt;hexo文章链接默认的生成规则是：&lt;code&gt;:year/:month/:day/:title&lt;/code&gt;是按照年、月、日、标题来生成的&lt;/p&gt;
&lt;p&gt;比如默认生成：&lt;code&gt;https://www.web
      
    
    </summary>
    
    
      <category term="hexo" scheme="https://www.webpages.show/categories/hexo/"/>
    
    
      <category term="hexo" scheme="https://www.webpages.show/tags/hexo/"/>
    
      <category term="abbrlink" scheme="https://www.webpages.show/tags/abbrlink/"/>
    
  </entry>
  
  <entry>
    <title>hexo导航目录点击自动跳转</title>
    <link href="https://www.webpages.show/p/a564d3b/"/>
    <id>https://www.webpages.show/p/a564d3b/</id>
    <published>2020-08-05T07:42:35.656Z</published>
    <updated>2020-08-05T07:45:34.899Z</updated>
    
    <content type="html"><![CDATA[<p>建立page：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page &#39;navi&#39;</span><br></pre></td></tr></table></figure><p>在<code>navi</code>下的<code>index.md</code>中加入如下代码：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta http-equiv&#x3D;&quot;refresh&quot; content&#x3D;&quot;0;url&#x3D;https:&#x2F;&#x2F;navi.webpages.show&#x2F;&quot;&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br></pre></td></tr></table></figure><p>or</p><p>单页显示</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">menu:</span><br><span class="line">  Home: &#x2F; || fas fa-home</span><br><span class="line">  导航: https:&#x2F;&#x2F;navi.webpages.show&#x2F; || fas fa-paper-plane</span><br><span class="line">  文章||fas fa-list:</span><br><span class="line">    - 时间轴 || &#x2F;archives&#x2F; || fas fa-archive</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;建立page：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;
      
    
    </summary>
    
    
      <category term="hexo" scheme="https://www.webpages.show/categories/hexo/"/>
    
    
      <category term="hexo" scheme="https://www.webpages.show/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>hexo-butterfly添加日历插件</title>
    <link href="https://www.webpages.show/p/22d30f17/"/>
    <id>https://www.webpages.show/p/22d30f17/</id>
    <published>2020-08-03T12:49:04.576Z</published>
    <updated>2020-08-12T06:15:48.931Z</updated>
    
    <content type="html"><![CDATA[<h3><span id="添加日历">添加日历</span></h3><p>安装 <code>hexo-generator-calendar</code> 插件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install --save git:&#x2F;&#x2F;github.com&#x2F;howiefh&#x2F;hexo-generator-calendar.git</span><br></pre></td></tr></table></figure><p>下载 <code>calendar.js</code> 和 <code>languages.js</code> 文件，保存到 <code>themes/Butterfly/source/js/</code> 目录</p><ul><li><a href="https://github.com/pengloo53/Hexo-theme-light_cn/blob/master/source/js/calendar.js" target="_blank" rel="noopener">calendar.js</a> 下载地址</li><li><a href="https://github.com/pengloo53/Hexo-theme-light_cn/blob/master/source/js/languages.js" target="_blank" rel="noopener">languages.js</a> 下载地址</li></ul><p>编辑 <code>calendar.js</code> 文件，在文件最后<code>}(jQuery));</code> 之前添加:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(document).ready(function () &#123;</span><br><span class="line">    $(&#39;#calendar&#39;).aCalendar(&#39;zh-CN&#39;);&#x2F;&#x2F;&#39;zh-CN&#39;请根据自己博客的语言选择</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>具体位置参考下图：</p><p>编辑 <code>butterfly.yml</code> 文件, 在 <code>inject-&gt;bottom</code> 下面添加如下内容</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- &lt;script src&#x3D;&quot;&#x2F;js&#x2F;calendar.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">- &lt;script src&#x3D;&quot;&#x2F;js&#x2F;languages.js&quot;&gt;&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure><p>新建 <code>calendar.styl</code> 文件，保存到 <code>themes/Butterfly/source/css/_layout/</code> 目录下,内容如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line">#calendar</span><br><span class="line">  a</span><br><span class="line">    text-decoration none</span><br><span class="line"></span><br><span class="line">.cal-head</span><br><span class="line">  margin-bottom: 15px</span><br><span class="line">  position relative</span><br><span class="line">  height 20px</span><br><span class="line">  padding 8px 6px 2px 6px</span><br><span class="line"></span><br><span class="line">.cal-prev,.cal-next</span><br><span class="line">  position absolute</span><br><span class="line">  top 9px</span><br><span class="line">  width 16px</span><br><span class="line">  height 18px</span><br><span class="line">  padding 3px 4px</span><br><span class="line">  border 1px solid transparent</span><br><span class="line">  color #333</span><br><span class="line">  outline 0</span><br><span class="line"></span><br><span class="line">.cal-prev</span><br><span class="line">  left 8px</span><br><span class="line">  &amp;:before</span><br><span class="line">    border-right 9px solid #333</span><br><span class="line"></span><br><span class="line">.cal-next</span><br><span class="line">  right 8px</span><br><span class="line">  &amp;:before</span><br><span class="line">    border-left 9px solid #333</span><br><span class="line"></span><br><span class="line">.cal-prev:before,.cal-next:before</span><br><span class="line">  content &#39;&#39;</span><br><span class="line">  display block</span><br><span class="line">  width 0</span><br><span class="line">  height 0</span><br><span class="line">  border-top 5px solid transparent</span><br><span class="line">  border-bottom 5px solid transparent</span><br><span class="line"></span><br><span class="line">.cal-title</span><br><span class="line">  width 100px</span><br><span class="line">  margin 0 auto</span><br><span class="line">  color #333</span><br><span class="line">  font bold 14px&#x2F;18px Arial</span><br><span class="line">  text-align center</span><br><span class="line">  a</span><br><span class="line">    border 1px solid transparent</span><br><span class="line">    color #9f9f9f</span><br><span class="line"></span><br><span class="line">.cal,</span><br><span class="line">.cal th,</span><br><span class="line">.cal td</span><br><span class="line">  border 1px solid #d1d1d1</span><br><span class="line"></span><br><span class="line">.cal</span><br><span class="line">  display: table</span><br><span class="line">  border-collapse separate</span><br><span class="line">  border-spacing 0</span><br><span class="line">  border-width 1px 0 0 1px</span><br><span class="line">  table-layout fixed</span><br><span class="line">  width 100%</span><br><span class="line">  margin 0</span><br><span class="line">  th</span><br><span class="line">    background #9f9f9f</span><br><span class="line">    color #fff</span><br><span class="line">    border-width 0 1px 1px 0</span><br><span class="line">    font-weight 700</span><br><span class="line">  td</span><br><span class="line">    border-width 0 1px 1px 0</span><br><span class="line">  tbody</span><br><span class="line">    a</span><br><span class="line">      background-color #007acc</span><br><span class="line">      color #fff</span><br><span class="line">      display block</span><br><span class="line">      font-weight 700</span><br><span class="line">    .cal-today</span><br><span class="line">      background-color #66ecfd</span><br><span class="line">      color #fff</span><br><span class="line">  .cal-gray</span><br><span class="line">    color #bbb8b8</span><br><span class="line"></span><br><span class="line">[data-theme&#x3D;&#39;dark&#39;] .cal .cal-gray</span><br><span class="line">  color #505050</span><br><span class="line"></span><br><span class="line">.cal th,</span><br><span class="line">.cal td</span><br><span class="line">  font-weight normal</span><br><span class="line">  line-height 2.5625</span><br><span class="line">  padding 0</span><br><span class="line">  text-align center</span><br><span class="line"></span><br><span class="line">[data-theme&#x3D;&#39;dark&#39;] .cal .cal-foot</span><br><span class="line">  color #9f9f9f</span><br><span class="line"></span><br><span class="line">.cal .cal-foot</span><br><span class="line">  color #2ca6cb</span><br><span class="line"></span><br><span class="line">.cal-title a:hover,</span><br><span class="line">.cal-prev:hover,</span><br><span class="line">.cal-next:hover,</span><br><span class="line">.cal .cal-foot:hover,</span><br><span class="line">.cal .cal-foot:focus,</span><br><span class="line">.cal tbody a:hover,</span><br><span class="line">.cal tbody a:focus</span><br><span class="line">  background-color #686868</span><br><span class="line">  color #fff</span><br><span class="line">  cursor pointer</span><br></pre></td></tr></table></figure><p>在 <code>themes/Butterfly/layout/includes/widget/</code> 文件夹新建 <code>card_calendar.pug</code> 文件，文件内容如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">.card-widget.card-calendar</span><br><span class="line">  .card-content</span><br><span class="line">    .item-headline</span><br><span class="line">      i.far.fa-calendar-alt(aria-hidden&#x3D;&quot;true&quot;)</span><br><span class="line">      span&#x3D; _p(&#39;aside.card_calendar&#39;)</span><br><span class="line">    div.widget-wrap</span><br><span class="line">    div#calendar.widget</span><br></pre></td></tr></table></figure><p>编辑 <code>themes/Butterfly/layout/includes/widget/index.pug</code>     文件，在你想要显示的位置插入以下代码：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if theme.aside.card_calendar</span><br><span class="line">        !&#x3D;partial(&#39;includes&#x2F;widget&#x2F;card_calendar&#39;, &#123;&#125;, &#123;cache:theme.fragment_cache&#125;)</span><br></pre></td></tr></table></figure><p>具体位置参考下图：</p><img src= "/img/loading.gif" data-src="http://qiniu.webpages.show/images/card4.jpg"><blockquote><p>注意格式，放置位置，会影响顺序排版！</p></blockquote><p>编辑 <code>butterfly.yml</code> 文件，在 <code>card_webinfo</code> 下面添加一行 <code>card_calendar: true</code></p><img src= "/img/loading.gif" data-src="http://qiniu.webpages.show/images/card2.jpg"><p>编辑 <code>themes/Butterfly/languages/zh-CN.yml</code> 文件 (请根据你的网站语言选择)，找到 <code>aside</code>  , 在下面添加一行 <code>card_calendar: 日历</code> (后面的文本可自定义)</p><img src= "/img/loading.gif" data-src="http://qiniu.webpages.show/images/card3.jpg"><p>如果不想显示，直接把 <code>butterfly.yml</code> 文件的 <code>card_calendar: true</code> 改为 <code>card_calendar: false</code> 即可</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3&gt;&lt;span id=&quot;添加日历&quot;&gt;添加日历&lt;/span&gt;&lt;/h3&gt;&lt;p&gt;安装 &lt;code&gt;hexo-generator-calendar&lt;/code&gt; 插件&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;
      
    
    </summary>
    
    
      <category term="hexo" scheme="https://www.webpages.show/categories/hexo/"/>
    
    
      <category term="hexo" scheme="https://www.webpages.show/tags/hexo/"/>
    
      <category term="butterfly" scheme="https://www.webpages.show/tags/butterfly/"/>
    
  </entry>
  
  <entry>
    <title>Valine添加自定义邮件提醒</title>
    <link href="https://www.webpages.show/p/c4492888/"/>
    <id>https://www.webpages.show/p/c4492888/</id>
    <published>2020-07-31T08:00:50.014Z</published>
    <updated>2020-07-31T08:01:52.861Z</updated>
    
    <content type="html"><![CDATA[<h3><span id="绑定域名">绑定域名</span></h3><p>请先<a href="https://tab.leancloud.cn/login.html#/signin" target="_blank" rel="noopener">登录</a>或<a href="https://tab.leancloud.cn/login.html#/signin" target="_blank" rel="noopener">注册</a> <code>LeanCloud</code>, 进入控制台</p><p>首先需要域名绑定,并且你的域名需要备案</p><p>点击<code>设置</code>-&gt;<code>域名绑定</code>-&gt;<code>云引擎</code></p><img src= "/img/loading.gif" data-src="http://qiniu.webpages.show/images/LeanCloud2.jpg"><h3><span id="部署">部署</span></h3><p>点击<code>云引擎</code>-&gt;<code>部署</code></p><img src= "/img/loading.gif" data-src="http://qiniu.webpages.show/images/LeanCloud3.jpg"><p>填上代码 由 <a href="https://github.com/zhaojun1998/Valine-Admin" target="_blank" rel="noopener">zhaojun1998</a> 提供</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:&#x2F;&#x2F;github.com&#x2F;zhaojun1998&#x2F;Valine-Admin</span><br></pre></td></tr></table></figure><p>到代码库中并部署到master，最后在日志中看到部署成功就行了</p><h3><span id="环境配置项">环境配置项</span></h3><img src= "/img/loading.gif" data-src="http://qiniu.webpages.show/images/LeanCloud4.jpg"><p>参数介绍</p><ul><li>SITE_NAME : 网站名称</li><li>SITE_URL : 网站地址, 最后不要加 /</li><li>SMTP_USER : SMTP 服务用户名，一般为邮箱地址（例如QQ 账号.qq.com）</li><li>SMTP_PASS : SMTP 密码，一般为授权码，而不是邮箱的登陆密码，请自行查询对应邮件服务商的获取方式</li><li>SMTP_PORT ： 465  #端口</li><li>SMTP_SERVICE : 邮件服务提供商，支持QQ、163、126、Gmail</li><li>SMTP_HOST : 提供邮件服务的支持方（例如QQ，就是smtp.qq.com</li><li>SENDER_NAME : 寄件人名称</li><li>SENDER_EMAIL : 收件的邮箱地址</li><li>TEMPLATE_NAME : 收到的邮件主题，不填则是默认，建议选rainbow效果在最后查看</li><li>ADMIN_URL ：定时唤醒机器，填写绑定的云引擎域名</li></ul><h3><span id="设置邮件模板">设置邮件模板</span></h3><p>进入<code>设置</code>-&gt;<code>邮件模板</code>填入以下代码，其中改掉相应的用户名为你自己的点击<code>保存</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;Hi, &#123;&#123;username&#125;&#125;&lt;&#x2F;p&gt;</span><br><span class="line">&lt;p&gt;</span><br><span class="line">你在 &#123;&#123;appname&#125;&#125; 的评论收到了新的回复，请点击查看：</span><br><span class="line">&lt;&#x2F;p&gt;</span><br><span class="line">&lt;p&gt;&lt;a href&#x3D;&quot;https:&#x2F;&#x2F;www.webpages.show&#x2F;&quot; style&#x3D;&quot;display: inline-block; padding: 10px 20px; border-radius: 4px; background-color: #3090e4; color: #fff; text-decoration: none;&quot;&gt;马上查看&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;</span><br></pre></td></tr></table></figure><img src= "/img/loading.gif" data-src="http://qiniu.webpages.show/images/LeanCloud5.jpg"><h3><span id="休眠定时唤醒">休眠定时唤醒</span></h3><p>需要说明的是：</p><p>免费版的 LeanCloud 容器，是有强制性休眠策略的，不能 24 小时运行：</p><blockquote><p>每天必须休眠 6 个小时<br>30 分钟内没有外部请求，则休眠。<br>休眠后如果有新的外部请求实例则马上启动（但激活时此次发送邮件会失败）</p></blockquote><p>如果不想付费的话，最佳使用方案就设置定时器，每天 7 - 23 点每 20 分钟访问一次，这样可以保持每天的绝大多数时间邮件服务是正常的。</p><p>点击<code>云引擎</code> - <code>定时任务</code>，新增定时器，按照图片上填写：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0 *&#x2F;20 7-23 * * ?</span><br></pre></td></tr></table></figure><img src= "/img/loading.gif" data-src="http://qiniu.webpages.show/images/LeanCloud6.jpg"><p>在<code>云引擎</code>-<code>设置</code>-<code>自定义环境变量</code>中添加</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ADMIN_URL : #添加绑定成功的云引擎域名</span><br></pre></td></tr></table></figure><p><code>保存</code></p><h3><span id="切记">切记</span></h3><p>最重要的要在<code>云引擎</code> -&gt; <code>部署</code> 中点击 <code>重启</code></p><p>日志</p><p><code>云引擎的</code> - <code>日志</code> 中可以看到提示以及定时任务执行情况，会返回状态码</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3&gt;&lt;span id=&quot;绑定域名&quot;&gt;绑定域名&lt;/span&gt;&lt;/h3&gt;&lt;p&gt;请先&lt;a href=&quot;https://tab.leancloud.cn/login.html#/signin&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;登录&lt;/a&gt;或&lt;a href
      
    
    </summary>
    
    
      <category term="hexo" scheme="https://www.webpages.show/categories/hexo/"/>
    
    
      <category term="hexo" scheme="https://www.webpages.show/tags/hexo/"/>
    
      <category term="valine" scheme="https://www.webpages.show/tags/valine/"/>
    
  </entry>
  
  <entry>
    <title>valine 评论和美化</title>
    <link href="https://www.webpages.show/p/ffb5990d/"/>
    <id>https://www.webpages.show/p/ffb5990d/</id>
    <published>2020-07-31T07:16:38.653Z</published>
    <updated>2020-07-31T08:31:36.371Z</updated>
    
    <content type="html"><![CDATA[<h3><span id="开启valine-评论">开启Valine 评论</span></h3><h3><span id="首先获取app-id-和-app-key">首先获取APP ID 和 APP Key</span></h3><p>请先<a href="https://tab.leancloud.cn/login.html#/signin" target="_blank" rel="noopener">登录</a>或<a href="https://tab.leancloud.cn/login.html#/signin" target="_blank" rel="noopener">注册</a> <code>LeanCloud</code>, 进入控制台后点击左下角创建应用：</p><img src= "/img/loading.gif" data-src="http://qiniu.webpages.show/images/LeanCloud.jpg"><p>应用创建好以后，进入刚刚创建的应用，选择左下角的设置&gt;应用Key，然后就能看到你的<code>APP ID</code>和<code>APP Key</code>了：</p><img src= "/img/loading.gif" data-src="http://qiniu.webpages.show/images/LeanCloud1.jpg"><h4><span id="然后配置-butterflyyml">然后配置 butterfly.yml:</span></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">valine:</span><br><span class="line">   enable: true # if you want use valine,please set this value is true</span><br><span class="line">   appId: sdIB--PW4---s8Esu----Va # leancloud application app id</span><br><span class="line">   appKey: Yj--HV----Hw0k6D---Eiv2O # leancloud application app key</span><br><span class="line">   pageSize: 10 # comment list page size</span><br><span class="line">   avatar: monsterid # gravatar style https:&#x2F;&#x2F;valine.js.org&#x2F;#&#x2F;avatar</span><br><span class="line">   lang: zh-CN # i18n: zh-CN&#x2F;zh-TW&#x2F;en&#x2F;ja</span><br><span class="line">   placeholder: 在07:00 AM至11:59 PM之间,填写邮箱地址可及时收到邮件回复提醒 # valine comment input placeholder(like: Please leave your footprints )</span><br><span class="line">   guest_info: nick,mail,link #valine comment header info (nick&#x2F;mail&#x2F;link)</span><br><span class="line">   recordIP: true # Record reviewer IP</span><br><span class="line">   serverURLs: # This configuration is suitable for domestic custom domain name users, overseas version will be automatically detected (no need to manually fill in)</span><br><span class="line">   bg: # valine background</span><br><span class="line">   emojiCDN: https:&#x2F;&#x2F;i0.hdslb.com&#x2F;bfs&#x2F;emote&#x2F; # emoji CDN</span><br><span class="line">   enableQQ: true # enable the Nickname box to automatically get QQ Nickname and QQ Avatar</span><br><span class="line">   requiredFields: mail # required fields (nick&#x2F;mail)</span><br><span class="line">   count: true # dispaly comment count in top_img</span><br></pre></td></tr></table></figure><p>Valine 於 v1.4.5 開始支持自定義表情，如果你需要自行配置，請在 <code>emojiCDN</code> 配置表情 <code>CDN</code></p><p>同时在 Hexo 工作目錄下的 <code>source/_data/</code> 创建一個 json 文件 <code>valine.json</code>, 等同于 Valine 需要配置的 <code>emojiMaps</code>，<code>valine.json</code> 配置方式可參考如下。</p><p>示例引用B站表情</p><p><code>butterfly.ym</code>下valinel,<code>emojiCDN</code>处添加:<code>https://i0.hdslb.com/bfs/emote/</code></p><blockquote><p>valine.json</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#123; </span><br><span class="line">&quot;tv_doge&quot;: &quot;6ea59c827c414b4a2955fe79e0f6fd3dcd515e24.png&quot;,</span><br><span class="line">&quot;tv_親親&quot;: &quot;a8111ad55953ef5e3be3327ef94eb4a39d535d06.png&quot;,</span><br><span class="line">&quot;tv_偷笑&quot;: &quot;bb690d4107620f1c15cff29509db529a73aee261.png&quot;,</span><br><span class="line">&quot;tv_再見&quot;: &quot;180129b8ea851044ce71caf55cc8ce44bd4a4fc8.png&quot;,</span><br><span class="line">&quot;tv_冷漠&quot;: &quot;b9cbc755c2b3ee43be07ca13de84e5b699a3f101.png&quot;,</span><br><span class="line">&quot;tv_發怒&quot;: &quot;34ba3cd204d5b05fec70ce08fa9fa0dd612409ff.png&quot;,</span><br><span class="line">&quot;tv_發財&quot;: &quot;34db290afd2963723c6eb3c4560667db7253a21a.png&quot;,</span><br><span class="line">&quot;tv_可愛&quot;: &quot;9e55fd9b500ac4b96613539f1ce2f9499e314ed9.png&quot;,</span><br><span class="line">&quot;tv_吐血&quot;: &quot;09dd16a7aa59b77baa1155d47484409624470c77.png&quot;,</span><br><span class="line">&quot;tv_呆&quot;: &quot;fe1179ebaa191569b0d31cecafe7a2cd1c951c9d.png&quot;,</span><br><span class="line">&quot;tv_嘔吐&quot;: &quot;9f996894a39e282ccf5e66856af49483f81870f3.png&quot;,</span><br><span class="line">&quot;tv_困&quot;: &quot;241ee304e44c0af029adceb294399391e4737ef2.png&quot;,</span><br><span class="line">&quot;tv_壞笑&quot;: &quot;1f0b87f731a671079842116e0991c91c2c88645a.png&quot;,</span><br><span class="line">&quot;tv_大佬&quot;: &quot;093c1e2c490161aca397afc45573c877cdead616.png&quot;,</span><br><span class="line">&quot;tv_大哭&quot;: &quot;23269aeb35f99daee28dda129676f6e9ea87934f.png&quot;,</span><br><span class="line">&quot;tv_委屈&quot;: &quot;d04dba7b5465779e9755d2ab6f0a897b9b33bb77.png&quot;,</span><br><span class="line">&quot;tv_害羞&quot;: &quot;a37683fb5642fa3ddfc7f4e5525fd13e42a2bdb1.png&quot;,</span><br><span class="line">&quot;tv_尷尬&quot;: &quot;7cfa62dafc59798a3d3fb262d421eeeff166cfa4.png&quot;,</span><br><span class="line">&quot;tv_微笑&quot;: &quot;70dc5c7b56f93eb61bddba11e28fb1d18fddcd4c.png&quot;,</span><br><span class="line">&quot;tv_思考&quot;: &quot;90cf159733e558137ed20aa04d09964436f618a1.png&quot;,</span><br><span class="line">&quot;tv_驚嚇&quot;: &quot;0d15c7e2ee58e935adc6a7193ee042388adc22af.png&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3><span id="在-valine-输入界面增加背景图">在 valine 输入界面增加背景图</span></h3><p>建议大家在找图的时候最好找白色背景或者透明背景的，不然看起来很难看。</p><img src= "/img/loading.gif" data-src="http://qiniu.webpages.show/images/1595912900562.jpg"><ol><li>使用方法如下，将 CSS 加到你的博客样式文件中. 我是在<code>Butterfly/source/css/veditor.css</code>目录下<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#veditor &#123;</span><br><span class="line">background-image: url(https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;gh&#x2F;drew233&#x2F;cdn&#x2F;20200409110727.webp);</span><br><span class="line">background-size: contain;</span><br><span class="line">background-repeat: no-repeat;</span><br><span class="line">background-position: right;</span><br><span class="line">background-color: rgba(255, 255, 255, 0);</span><br><span class="line">resize: vertical</span><br><span class="line">&#125;</span><br><span class="line">#veditor:focus&#123;</span><br><span class="line">background-position-y: 200px;</span><br><span class="line">transition: all 0.2s ease-in-out 0s;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><code>Butterfly/source/js/valine.js</code> 添加以下代码<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;可以与 valine 的配置 js 文件放一起，或放置到公共 js 文件中</span><br><span class="line">$(&quot;#veditor&quot;).focus(function()&#123;$(this).css(&quot;background-image&quot;,&quot;none&quot;);&#125;);</span><br><span class="line">$(&quot;#veditor&quot;).blur(function()&#123;</span><br><span class="line">      $(this).css(&quot;background-image&quot;,&quot;url(https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;gh&#x2F;drew233&#x2F;cdn&#x2F;20200409110727.webp)&quot;);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li>引用方式在<code>Butterfly/_config.yml</code>中<code>inject</code>添加<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">inject:</span><br><span class="line">   head:</span><br><span class="line">     - &lt;link rel&#x3D;&quot;stylesheet&quot; href&#x3D;&quot;&#x2F;css&#x2F;veditor.css&quot;&gt;</span><br><span class="line">   bottom:</span><br><span class="line">     - &lt;script src&#x3D;&quot;&#x2F;js&#x2F;veditor.js&quot;&gt;&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure></li></ol><h3><span id="valine-评论添加博主等标签">valine 评论添加博主等标签</span></h3><p>下载<a href="https://github.com/HCLonely/hexo-demo/edit/master/themes/Butterfly/layout/includes/comments/valine.pug" target="_blank" rel="noopener">valine.pug</a>文件，替换<code>themes/Butterfly/layout/includes/comments/valine.pug</code><br>编辑<code>butterfly.yml</code>文件，找到<code>valine</code>配置，添加以下配置项:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">master: # md5加密后的博主邮箱,自行对自己的邮箱进行加密填写</span><br><span class="line">    - 968c57dece36dc7de97013dd71a84773</span><br><span class="line">  friends: # md5加密后的小伙伴邮箱，自行对小伙伴邮箱加密填写</span><br><span class="line">    - f6572f1e203dd79b7545ff297b037d74</span><br><span class="line">    - a0adabb31677df92a2405fb18a02ee4d</span><br><span class="line">  metaPlaceholder: # 输入框的背景文字</span><br><span class="line">    nick: 昵称&#x2F;QQ号</span><br><span class="line">    mail: 邮箱(必填)</span><br><span class="line">    link: 网址(https:&#x2F;&#x2F;)</span><br><span class="line">  tagMeta: &#39;博主,小伙伴,访客&#39; # 标签要显示的文字,默认&#39;博主,小伙伴,访客&#39;</span><br><span class="line">  verify: true # 评论时是否需要验证，需jQuery支持</span><br></pre></td></tr></table></figure><p>编辑<code>butterfly.yml</code>文件，将<code>CDN</code>中的<code>valine</code>链接引用改为<code>https://cdn.jsdelivr.net/gh/HCLonely/Valine@latest/dist/Valine.min.js</code></p><p>改完之后<code>hexo clean</code>一下，不然不会生效</p><h3><span id="最后完整配置如下">最后完整配置如下</span></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">valine:</span><br><span class="line">   enable: true # if you want use valine,please set this value is true</span><br><span class="line">   appId: sdIB--PW4---s8Esu----Va # leancloud application app id</span><br><span class="line">   appKey: Yj--HV----Hw0k6D---Eiv2O # leancloud application app key</span><br><span class="line">   pageSize: 10 # comment list page size</span><br><span class="line">   avatar: monsterid # gravatar style https:&#x2F;&#x2F;valine.js.org&#x2F;#&#x2F;avatar</span><br><span class="line">   lang: zh-CN # i18n: zh-CN&#x2F;zh-TW&#x2F;en&#x2F;ja</span><br><span class="line">   placeholder: 在07:00 AM至11:59 PM之间,填写邮箱地址可及时收到邮件回复提醒 # valine comment input placeholder(like: Please leave your footprints )</span><br><span class="line">   guest_info: nick,mail,link #valine comment header info (nick&#x2F;mail&#x2F;link)</span><br><span class="line">   recordIP: true # Record reviewer IP</span><br><span class="line">   serverURLs: # This configuration is suitable for domestic custom domain name users, overseas version will be automatically detected (no need to manually fill in)</span><br><span class="line">   bg: # valine background</span><br><span class="line">   emojiCDN: https:&#x2F;&#x2F;i0.hdslb.com&#x2F;bfs&#x2F;emote&#x2F; # emoji CDN</span><br><span class="line">   enableQQ: true # enable the Nickname box to automatically get QQ Nickname and QQ Avatar</span><br><span class="line">   requiredFields: mail # required fields (nick&#x2F;mail)</span><br><span class="line">   count: true # dispaly comment count in top_img</span><br><span class="line">   master: # md5加密后的博主邮箱</span><br><span class="line">     - 968c57dece36dc7de97013dd71a84773</span><br><span class="line">   friends: # md5加密后的小伙伴邮箱</span><br><span class="line">     - f6572f1e203dd79b7545ff297b037d74</span><br><span class="line">   metaPlaceholder: # 输入框的背景文字</span><br><span class="line">     nick: 昵称&#x2F;QQ号</span><br><span class="line">     mail: 邮箱(必填)</span><br><span class="line">     link: 网址(https:&#x2F;&#x2F;)</span><br><span class="line">   tagMeta: &#39;博主,小伙伴,访客&#39; # 标签要显示的文字,默认&#39;博主,小伙伴,访客&#39;</span><br><span class="line">   verify: true # 评论时是否需要验证，需jQuery支持</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3&gt;&lt;span id=&quot;开启valine-评论&quot;&gt;开启Valine 评论&lt;/span&gt;&lt;/h3&gt;&lt;h3&gt;&lt;span id=&quot;首先获取app-id-和-app-key&quot;&gt;首先获取APP ID 和 APP Key&lt;/span&gt;&lt;/h3&gt;&lt;p&gt;请先&lt;a href=&quot;https://
      
    
    </summary>
    
    
      <category term="hexo" scheme="https://www.webpages.show/categories/hexo/"/>
    
    
      <category term="hexo" scheme="https://www.webpages.show/tags/hexo/"/>
    
      <category term="valine" scheme="https://www.webpages.show/tags/valine/"/>
    
  </entry>
  
  <entry>
    <title>Hexo哔哩哔哩番剧页面插件</title>
    <link href="https://www.webpages.show/p/8422e92e/"/>
    <id>https://www.webpages.show/p/8422e92e/</id>
    <published>2020-07-30T05:42:43.044Z</published>
    <updated>2020-07-31T08:32:17.744Z</updated>
    
    <content type="html"><![CDATA[<h3><span id="hexo哔哩哔哩番剧页面插件">Hexo哔哩哔哩番剧页面插件</span></h3><h3><span id="安装">安装</span></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install hexo-bilibili-bangumi --save</span><br></pre></td></tr></table></figure><h3><span id="配置">配置</span></h3><p>将下面的配置写入站点的配置文件<code>_config.yml</code>里(不是主题的配置文件).</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">bangumi:</span><br><span class="line">  enable: true</span><br><span class="line">  path:</span><br><span class="line">  vmid:</span><br><span class="line">  title: &#39;追番列表&#39;</span><br><span class="line">  quote: &#39;生命不息，追番不止！&#39;</span><br><span class="line">  show: 1</span><br><span class="line">  loading:</span><br><span class="line">  metaColor:</span><br><span class="line">  color:</span><br><span class="line">  webp:</span><br></pre></td></tr></table></figure><ul><li>enable: 是否启用</li><li>path: 番剧页面路径，默认bangumis/index.html</li><li>vmid: 哔哩哔哩番剧页面的vmid(uid)</li><li>title: 该页面的标题</li><li>quote: 写在页面开头的一段话,支持 html 语法</li><li>show: 初始显示页面：0: 想看,1: 在看,2: 看过，默认为1</li><li>loading: 图片加载完成前的 loading 图片</li><li>metaColor: meta 部分(简介上方)字体颜色</li><li>color: 简介字体颜色</li><li>webp: 番剧封面使用webp格式(此格式在safari浏览器下不显示，但是图片大小可以缩小 100 倍左右), 默认true</li></ul><h3><span id="使用">使用</span></h3><p>在<code>hexo generate</code>或<code>hexo deploy</code>之前使用<code>hexo bangumi -u</code>命令更新番剧数据！<br>删除数据命令:<code>hexo bangumi -d</code></p><h3><span id="获取-uid">获取 uid</span></h3><p>登录哔哩哔哩后前往<code>https://space.bilibili.com/</code> 页面，网址最后的一串数字就是<code>uid</code></p><p><strong>前提需要把番剧公开所有人可见</strong></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3&gt;&lt;span id=&quot;hexo哔哩哔哩番剧页面插件&quot;&gt;Hexo哔哩哔哩番剧页面插件&lt;/span&gt;&lt;/h3&gt;&lt;h3&gt;&lt;span id=&quot;安装&quot;&gt;安装&lt;/span&gt;&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class
      
    
    </summary>
    
    
      <category term="hexo" scheme="https://www.webpages.show/categories/hexo/"/>
    
    
      <category term="hexo" scheme="https://www.webpages.show/tags/hexo/"/>
    
      <category term="bilibili" scheme="https://www.webpages.show/tags/bilibili/"/>
    
  </entry>
  
  <entry>
    <title>安装 oh-my-zsh</title>
    <link href="https://www.webpages.show/p/65008a24/"/>
    <id>https://www.webpages.show/p/65008a24/</id>
    <published>2020-07-29T04:13:47.634Z</published>
    <updated>2020-07-29T05:30:17.131Z</updated>
    
    <content type="html"><![CDATA[<h3><span id="安装">安装</span></h3><p>之前用的Ubuntu，现在用的Centos，所以都写一下</p><h4><span id="ubuntu">Ubuntu</span></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">zsh:</span><br><span class="line">sudo apt-get install zsh -y</span><br><span class="line">git:</span><br><span class="line">sudo apt-get install git -y</span><br></pre></td></tr></table></figure><h4><span id="centos">Centos</span></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">zsh:</span><br><span class="line">sudo yum install zsh -y</span><br><span class="line">git:</span><br><span class="line">sudo yum install git -y</span><br></pre></td></tr></table></figure><h4><span id="下面的ubuntu和centos是一样的">下面的Ubuntu和Centos是一样的</span></h4><p>克隆仓库</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone git:&#x2F;&#x2F;github.com&#x2F;robbyrussell&#x2F;oh-my-zsh.git ~&#x2F;.oh-my-zsh</span><br></pre></td></tr></table></figure><p>备份原来的zshrc，如果文件存在的话</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp ~&#x2F;.zshrc ~&#x2F;.zshrc.bak</span><br></pre></td></tr></table></figure><p>创建一个新的zsh配置文件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp ~&#x2F;.oh-my-zsh&#x2F;templates&#x2F;zshrc.zsh-template ~&#x2F;.zshrc</span><br></pre></td></tr></table></figure><p>改变默认的Shell</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chsh -s &#x2F;bin&#x2F;zsh</span><br></pre></td></tr></table></figure><p>退出终端重新登入就可以</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3&gt;&lt;span id=&quot;安装&quot;&gt;安装&lt;/span&gt;&lt;/h3&gt;&lt;p&gt;之前用的Ubuntu，现在用的Centos，所以都写一下&lt;/p&gt;
&lt;h4&gt;&lt;span id=&quot;ubuntu&quot;&gt;Ubuntu&lt;/span&gt;&lt;/h4&gt;&lt;figure class=&quot;highlight plain&quot;&gt;
      
    
    </summary>
    
    
      <category term="oh-my-zsh" scheme="https://www.webpages.show/categories/oh-my-zsh/"/>
    
    
      <category term="oh-my-zsh" scheme="https://www.webpages.show/tags/oh-my-zsh/"/>
    
  </entry>
  
  <entry>
    <title>hexo-qiniu-sync使用七牛为Hexo存储图片等资源</title>
    <link href="https://www.webpages.show/p/d9a940f3/"/>
    <id>https://www.webpages.show/p/d9a940f3/</id>
    <published>2020-07-28T08:29:39.010Z</published>
    <updated>2020-07-28T09:19:46.010Z</updated>
    
    <content type="html"><![CDATA[<h3><span id="七牛存储设置">七牛存储设置</span></h3><p>1.申请七牛账户<br>2.创建存储空间（七牛叫作”Bucket“），注意添加的空间为”对象存储“，访问控制选择”公开空间“：<br>3.点击页面右上角头像→进入”密钥管理“→复制当前使用中的<code>AK</code>和<code>SK</code>，待会设置插件时会用到</p><h3><span id="设置-hexo-qiniu-sync-插件">设置 hexo-qiniu-sync 插件</span></h3><p>1.安装插件：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install hexo-qiniu-sync --save</span><br></pre></td></tr></table></figure><p>2.添加插件配置信息到站点<code>hexo</code>根配置文件 <code>_config.yml</code> ：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">qiniu:</span><br><span class="line">   offline: false</span><br><span class="line">   sync: true</span><br><span class="line">   bucket: #七牛空间名称 </span><br><span class="line">   access_key: #密钥AccessKey</span><br><span class="line">   secret_key: #SecretKey</span><br><span class="line">   dirPrefix:</span><br><span class="line">   urlPrefix:  #外链前缀域名，创建会自动分配测试域名，最好是自己的域名，测试域名有时效</span><br><span class="line">   local_dir: cdn</span><br><span class="line">   update_exist: true</span><br><span class="line">   image:</span><br><span class="line">     folder: images</span><br><span class="line">     extend:</span><br><span class="line">   js:</span><br><span class="line">     folder: js</span><br><span class="line">   css:</span><br><span class="line">     folder: css</span><br></pre></td></tr></table></figure><h3><span id="配置参数的说明">配置参数的说明：</span></h3><ul><li><code>offline</code> ：是否离线。设置为 true 将在本地预览时使用本地地址渲染，省流量； false 将使用同步到七牛空间的静态资源渲染，方便检查资源链接是否正确。</li><li><code>sync</code> ：是否同步到七牛，一般都是设置 true 啦</li><li>dirPrefix ：资源将上传到七牛空间的此目录下，可像我一样设置为空。该参数会影响外链的地址，如果设置为非空值，例如默认值 static ，则 urlPrefix 为保持一致需加上目录后缀 /static ，改为 <a href="http://7xqb0u.com1.z0.glb.clouddn.com/static" target="_blank" rel="noopener">http://7xqb0u.com1.z0.glb.clouddn.com/static</a> 。</li><li><code>local_dir</code> ：本地资源储存目录。在本例中，待上传的资源都储存在hexo主目录中的 cdn 文件夹（也就是与 source 目录平级）中。</li><li><code>update_exist</code> ：设置为 true ，则会在文件更新之后重新上传并更新七牛空间上中的原有文件。</li><li>image/js/css ：子参数folder为不同静态资源种类的目录名称，一般不需要改动</li><li>image.extend ：使用 qnimg 标签引用图片的默认图片处理操作。可以使用 基本图片处理（imageView2）、高级图片处理（imageMogr2）、图片水印处理（watermark） 这三个图片处理接口，多个接口内容之间用 | 间隔。</li></ul><h3><span id="配置本地目录">配置本地目录</span></h3><p>本地目录名称需要与 <code>local_dir</code> 参数的值一致。所以在 hexo主目录 下新建与 <code>source</code> 平级的目录 <code>cdn</code> ，用于存放需要上传到七牛的资源<br>在 cdn 目录下创建子目录： <code>css</code> 、 <code>images</code> 、 <code>js</code> ，与 <code>image/js/css</code> 子参数 <code>folder</code> 保持一致，待上传的css、图片、js文件应该存储到相应子目录。也可新建其他子目录,我的Hexo主目录结构如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">├─.deploy_git</span><br><span class="line">├─cdn</span><br><span class="line">│ ├─css</span><br><span class="line">│ ├─images</span><br><span class="line">│ └─js</span><br><span class="line">├─node_modules</span><br><span class="line">├─public</span><br><span class="line">├─scaffolds</span><br><span class="line">├─source</span><br><span class="line">└─theme</span><br></pre></td></tr></table></figure><h3><span id="引用七牛资源">引用七牛资源</span></h3><h4><span id="引用图片">引用图片</span></h4><p>图片的引用是最典型的情况。让我们来看最简单的情况：如果你想引用储存在 <code>cdn/images</code> 下的图片 <code>demo.jpg</code> ，只需在文章中插入：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% qnimg demo.jpg %&#125;</span><br></pre></td></tr></table></figure><p>生成站点时将被解析为：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src&#x3D;&quot;http:&#x2F;&#x2F;7xqb0u.com1.z0.glb.clouddn.com&#x2F;images&#x2F;demo.jpg&quot;&gt;  注意路径，要与得到的七牛外链路径相同</span><br></pre></td></tr></table></figure><p>我们总结一下生成的图片外链地址规则。我们把引用实例概括为：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% qnimg ImgFile %&#125;</span><br></pre></td></tr></table></figure><p>则生成的图片外链地址规则为 <code>urlPrefix</code> + <code>/</code> + <code>image.folder</code> + <code>/</code> + <code>ImgFile</code> 。<br>我们再定义文件在 cdn 目录下的相对路径为 <code>FilePath</code> ，即文件 <code>cdn/demo.mp3</code> 的 <code>FilePath</code> 为 <code>demo.mp3</code> ， <code>cdn/images/test/01.png</code> 的 <code>FilePath</code> 为 <code>images/test/01.png</code> 。则实际上传到七牛的文件外链地址为 AK/SK所指向用户的绑定域名 + <code>/</code> + <code>dirPrefix</code> + <code>/</code> + <code>FilePath</code> 。只有当生成的图片外链地址与实际上传到七牛的文件外链地址一致时，引用的图片才能正确显示。根据配置文件，我们知道：</p><ul><li>urlPrefix = <a href="http://qdwuxlf4l.bkt.clouddn.com" target="_blank" rel="noopener">http://qdwuxlf4l.bkt.clouddn.com</a></li><li>image.folder = images</li><li>AK/SK所指向用户的绑定域名 = <a href="http://qdwuxlf4l.bkt.clouddn.com" target="_blank" rel="noopener">http://qdwuxlf4l.bkt.clouddn.com</a></li><li>dirPrefix 为空值<br>代入，可得：</li><li>生成的图片外链地址规则 = <a href="http://qdwuxlf4l.bkt.clouddn.com/images/ImgFile" target="_blank" rel="noopener">http://qdwuxlf4l.bkt.clouddn.com/images/ImgFile</a></li><li>上传到七牛的文件外链地址 = <a href="http://qdwuxlf4l.bkt.clouddn.com/FilePath" target="_blank" rel="noopener">http://qdwuxlf4l.bkt.clouddn.com/FilePath</a></li></ul><p>而如果按照上文所说，将图片文件存储在 cdn/images 目录下，则 images/ + ImgFile = FilePath ，二者相等。<br>要想正确的引用外链，一定要注意每一个步骤的设置。如果最后外链不能正常显示，首先对比一下网站博客引用的地址和七牛的外链地址是否一致，如果不一致，则对照外链地址的生成规律，检查文件存放路径、 urlPrefix 、 dirPrefix 、 image.folder 设置是否正确。</p><h4><span id="图片引用的高阶版">图片引用的高阶版</span></h4><p>高级用法的通用模版：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% qnimg imageFile [attr1:value1] [&#39;attr2:value21 value22 ...&#39;] [extend:... | normal:yes] %&#125;</span><br></pre></td></tr></table></figure><ul><li>[] 表示可选项，按需添加，也可以不写</li><li>| 表示二选一</li><li>extend:… 图片处理参数，表示对图片进行某种特定处理5，多个处理之间用 | 间</li><li>normal:yes 表示使用原图，忽略 <code>_config.yml</code> 文件中的 image.extend 设置</li></ul><p>实例 图片的本地路径为 <code>cdn/images/test/demo.png</code> ：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% qnimg test&#x2F;demo.png title:标题 alt:说明 &#39;class:class1 class2&#39; extend:?imageView2&#x2F;2&#x2F;w&#x2F;600 %&#125;</span><br></pre></td></tr></table></figure><p>解析为：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;img title&#x3D;&quot;标题&quot; alt&#x3D;&quot;说明&quot; class&#x3D;&quot;class1 class2&quot; src&#x3D;&quot;http:&#x2F;&#x2F;qdwuxlf4l.bkt.clouddn.com&#x2F;images&#x2F;test&#x2F;demo.png?imageView2&#x2F;2&#x2F;w&#x2F;600&quot;&gt;</span><br></pre></td></tr></table></figure><p>其中 <code>?imageView2/2/w/500</code> 代表生成宽度最多500px的缩略图5。如果经常使用某种图片效果，可以在其七牛创建处理样式，以后直接将 <code>extend</code> 参数设置为 分隔符 <code>+</code> 样式名 就好。例如设置的分隔符为 <code>-</code> ，样式名为 <code>new</code> ，则 <code>extend</code> 参数为 <code>-new</code> 。</p><h4><span id="引用css和js">引用CSS和JS</span></h4><p>只是引用的标签名不同：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% qnjs jsFile attr1:value1 attr2:value2 &#39;attr3:value31 value32 value3n&#39; %&#125;</span><br><span class="line">&#123;% qncss cssFile attr1:value1 attr2:value2 &#39;attr3:value31 value32 value3n&#39; %&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3&gt;&lt;span id=&quot;七牛存储设置&quot;&gt;七牛存储设置&lt;/span&gt;&lt;/h3&gt;&lt;p&gt;1.申请七牛账户&lt;br&gt;2.创建存储空间（七牛叫作”Bucket“），注意添加的空间为”对象存储“，访问控制选择”公开空间“：&lt;br&gt;3.点击页面右上角头像→进入”密钥管理“→复制当前使用中的&lt;
      
    
    </summary>
    
    
      <category term="hexo" scheme="https://www.webpages.show/categories/hexo/"/>
    
    
      <category term="hexo" scheme="https://www.webpages.show/tags/hexo/"/>
    
      <category term="qiniu" scheme="https://www.webpages.show/tags/qiniu/"/>
    
  </entry>
  
  <entry>
    <title>hexo-tag-aplayer音乐插件使用</title>
    <link href="https://www.webpages.show/p/d64778f7/"/>
    <id>https://www.webpages.show/p/d64778f7/</id>
    <published>2020-07-28T06:18:21.306Z</published>
    <updated>2020-07-28T09:20:35.246Z</updated>
    
    <content type="html"><![CDATA[<h3><span id="hexo-tag-aplayer">hexo-tag-aplayer</span></h3><h3><span id="安装">安装</span></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save hexo-tag-aplayer</span><br></pre></td></tr></table></figure><h3><span id="依赖">依赖</span></h3><ul><li>APlayer.js &gt; 1.8.0</li><li>Meting.js &gt; 1.1.1</li></ul><h3><span id="使用">使用</span></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% aplayer title author url [picture_url, narrow, autoplay, width:xxx, lrc:xxx] %&#125;</span><br></pre></td></tr></table></figure><h4><span id="标签参数">标签参数</span></h4><ul><li><code>title</code> : 曲目标题</li><li><code>author</code>: 曲目作者</li><li><code>url</code>: 音乐文件 URL 地址</li><li><code>picture_url</code>: (可选) 音乐对应的图片地址</li><li><code>narrow</code>: （可选）播放器袖珍风格</li><li><code>autoplay</code>:  (可选) 自动播放，移动端浏览器暂时不支持此功能</li><li><code>width:xxx</code>: (可选) 播放器宽度 (默认: 100%)</li><li><code>lrc:xxx</code>: （可选）歌词文件 URL 地址<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% aplayer &quot;Caffeine&quot; &quot;Jeff Williams&quot; &quot;caffeine.mp3&quot; &quot;picture.jpg&quot; &quot;lrc:caffeine.txt&quot; %&#125;</span><br></pre></td></tr></table></figure></li></ul><h4><span id="歌词标签">歌词标签</span></h4><p>除了使用标签 <code>lrc</code> 选项来设定歌词，你也可以直接使用 <code>aplayerlrc</code> 标签来直接插入歌词文本在博客中：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% aplayerlrc &quot;title&quot; &quot;author&quot; &quot;url&quot; &quot;autoplay&quot; %&#125;</span><br><span class="line">[00:00.00]lrc here</span><br><span class="line">&#123;% endaplayerlrc %&#125;</span><br></pre></td></tr></table></figure><h4><span id="播放列表">播放列表</span></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;% aplayerlist %&#125;</span><br><span class="line">&#123;</span><br><span class="line">    &quot;narrow&quot;: false,                          &#x2F;&#x2F; （可选）播放器袖珍风格</span><br><span class="line">    &quot;autoplay&quot;: true,                         &#x2F;&#x2F; （可选) 自动播放，移动端浏览器暂时不支持此功能</span><br><span class="line">    &quot;mode&quot;: &quot;random&quot;,                         &#x2F;&#x2F; （可选）曲目循环类型，有 &#39;random&#39;（随机播放）, &#39;single&#39; (单曲播放), &#39;circulation&#39; (循环播放), &#39;order&#39; (列表播放)， 默认：&#39;circulation&#39;</span><br><span class="line">    &quot;showlrc&quot;: 3,                             &#x2F;&#x2F; （可选）歌词显示配置项，可选项有：1,2,3</span><br><span class="line">    &quot;mutex&quot;: true,                            &#x2F;&#x2F; （可选）该选项开启时，如果同页面有其他 aplayer 播放，该播放器会暂停</span><br><span class="line">    &quot;theme&quot;: &quot;#e6d0b2&quot;,                      &#x2F;&#x2F; （可选）播放器风格色彩设置，默认：#b7daff</span><br><span class="line">    &quot;preload&quot;: &quot;metadata&quot;,                    &#x2F;&#x2F; （可选）音乐文件预载入模式，可选项： &#39;none&#39; &#39;metadata&#39; &#39;auto&#39;, 默认: &#39;auto&#39;</span><br><span class="line">    &quot;listmaxheight&quot;: &quot;513px&quot;,                 &#x2F;&#x2F; (可选) 该播放列表的最大长度</span><br><span class="line">    &quot;music&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;title&quot;: &quot;CoCo&quot;,</span><br><span class="line">            &quot;author&quot;: &quot;Jeff Williams&quot;,</span><br><span class="line">            &quot;url&quot;: &quot;caffeine.mp3&quot;,</span><br><span class="line">            &quot;pic&quot;: &quot;caffeine.jpeg&quot;,</span><br><span class="line">            &quot;lrc&quot;: &quot;caffeine.txt&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;title&quot;: &quot;アイロニ&quot;,</span><br><span class="line">            &quot;author&quot;: &quot;鹿乃&quot;,</span><br><span class="line">            &quot;url&quot;: &quot;irony.mp3&quot;,</span><br><span class="line">            &quot;pic&quot;: &quot;irony.jpg&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line">&#123;% endaplayerlist %&#125;</span><br></pre></td></tr></table></figure><h3><span id="meingjs-支持-30-新功能-最主要最简单的使用-推荐使用">MeingJS 支持 (3.0 新功能) 最主要最简单的使用 推荐使用</span></h3><p><a href="https://github.com/metowolf/MetingJS" target="_blank" rel="noopener">MetingJS</a> 是基于<a href="https://github.com/metowolf/Meting" target="_blank" rel="noopener">Meting API</a> 的 APlayer 衍生播放器，引入 MetingJS 后，播放器将支持对于 QQ音乐、网易云音乐、虾米、酷狗、百度等平台的音乐播放。</p><p>如果想在本插件中使用 MetingJS，请在 Hexo 配置文件 <code>_config.yml</code> 中设置：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">aplayer:</span></span><br><span class="line">  <span class="attr">meting:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>接着就可以通过 <code>    <div id="aplayer-tTIAfalS" class="aplayer aplayer-tag-marker meting-tag-marker" data-id="..." data-server="undefined" data-type="undefined" data-mode="circulation" data-autoplay="false" data-mutex="true" data-listmaxheight="340px" data-preload="auto" data-theme="#ad7a86"></div></code> 在文章中使用 MetingJS 播放器了：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim source&#x2F;music&#x2F;index.md  #添加以下代码</span><br><span class="line">&#123;% meting &quot;1983872197&quot; &quot;netease&quot; &quot;playlist&quot; &quot;autoplay&quot; &quot;mutex:false&quot; &quot;listmaxheight:700px&quot; &quot;preload:none&quot; &quot;theme:#ad7a86&quot;%&#125;</span><br><span class="line">注 meting &quot;1983872197&quot; 可以为歌单ID或者单曲ID</span><br></pre></td></tr></table></figure><p>有关  <code>    <div id="aplayer-ILCAEMYZ" class="aplayer aplayer-tag-marker meting-tag-marker" data-id="undefined" data-server="undefined" data-type="undefined" data-mode="circulation" data-autoplay="false" data-mutex="true" data-listmaxheight="340px" data-preload="auto" data-theme="#ad7a86"></div></code>  的选项列表如下:</p><table><thead><tr><th>选项</th><th>默认值</th><th>描述</th></tr></thead><tbody><tr><td>id</td><td><strong>必须值</strong></td><td>歌曲 id / 播放列表 id / 相册 id / 搜索关键字</td></tr><tr><td>server</td><td><strong>必须值</strong></td><td>音乐平台: <code>netease</code>, <code>tencent</code>, <code>kugou</code>, <code>xiami</code>, <code>baidu</code></td></tr><tr><td>type</td><td><strong>必须值</strong></td><td><code>song</code>, <code>playlist</code>, <code>album</code>, <code>search</code>, <code>artist</code></td></tr><tr><td>fixed</td><td><code>false</code></td><td>开启固定模式</td></tr><tr><td>mini</td><td><code>false</code></td><td>开启迷你模式</td></tr><tr><td>loop</td><td><code>all</code></td><td>列表循环模式：<code>all</code>, <code>one</code>,<code>none</code></td></tr><tr><td>order</td><td><code>list</code></td><td>列表播放模式： <code>list</code>, <code>random</code></td></tr><tr><td>volume</td><td>0.7</td><td>播放器音量</td></tr><tr><td>lrctype</td><td>0</td><td>歌词格式类型</td></tr><tr><td>listfolded</td><td><code>false</code></td><td>指定音乐播放列表是否折叠</td></tr><tr><td>storagename</td><td><code>metingjs</code></td><td>LocalStorage 中存储播放器设定的键名</td></tr><tr><td>autoplay</td><td><code>true</code></td><td>自动播放，移动端浏览器暂时不支持此功能</td></tr><tr><td>mutex</td><td><code>true</code></td><td>该选项开启时，如果同页面有其他 aplayer 播放，该播放器会暂停</td></tr><tr><td>listmaxheight</td><td><code>340px</code></td><td>播放列表的最大长度</td></tr><tr><td>preload</td><td><code>auto</code></td><td>音乐文件预载入模式，可选项： <code>none</code>, <code>metadata</code>, <code>auto</code></td></tr><tr><td>theme</td><td><code>#ad7a86</code></td><td>播放器风格色彩设置</td></tr></tbody></table><p>插件会在每一個文件都插入 js 和 css，为了避免这一情況，<code>butterfiy 3.0</code> 版本內置了 aplayer 需要的 css 和 js。<br>如果需要在指定的文章上播放<br>首先在 Hexo 根目錄<code>_config</code> 里配置 <code>asset_inject</code> 为 <code>false</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">aplayer:</span><br><span class="line">  asset_inject: false</span><br></pre></td></tr></table></figure><p>然後在你需要使用 aplayer 的页面 Front-matter 添加</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aplayer: true</span><br></pre></td></tr></table></figure><p>这样只会在需要 aplayer 的页面插入 js 和 css。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3&gt;&lt;span id=&quot;hexo-tag-aplayer&quot;&gt;hexo-tag-aplayer&lt;/span&gt;&lt;/h3&gt;&lt;h3&gt;&lt;span id=&quot;安装&quot;&gt;安装&lt;/span&gt;&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td c
      
    
    </summary>
    
    
      <category term="hexo" scheme="https://www.webpages.show/categories/hexo/"/>
    
    
      <category term="hexo" scheme="https://www.webpages.show/tags/hexo/"/>
    
      <category term="aplayer" scheme="https://www.webpages.show/tags/aplayer/"/>
    
  </entry>
  
  <entry>
    <title>hexo-butterfly美化 (持续更新)</title>
    <link href="https://www.webpages.show/p/1b825486/"/>
    <id>https://www.webpages.show/p/1b825486/</id>
    <published>2020-07-28T04:47:56.670Z</published>
    <updated>2020-08-05T02:25:24.345Z</updated>
    
    <content type="html"><![CDATA[<h3><span id="樱花飘落背景">樱花飘落背景</span></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd theme&#x2F;Butterfly&#x2F;source&#x2F;js</span><br><span class="line">wget https:&#x2F;&#x2F;yremp.live&#x2F;wp-content&#x2F;uploads&#x2F;resource&#x2F;js&#x2F;sakura.js</span><br></pre></td></tr></table></figure><p>把下载好的Js文件放在<code>theme/Butterfly/source/js</code>文件夹下<br><code>/Butterfly/layout/includes</code>文件夹下找到<code>head.pug</code>文件，在最后引入</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if theme.sakura.enable</span><br><span class="line">  script(src&#x3D;&quot;&#x2F;js&#x2F;sakura.js&quot;)</span><br></pre></td></tr></table></figure><p>在主题的主配置文件加入<code>Butterfly/_config.yml</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 页面樱花飘落动效</span><br><span class="line">sakura:</span><br><span class="line">  enable: true</span><br></pre></td></tr></table></figure><h3><span id="浏览器标题恶搞">浏览器标题恶搞</span></h3><p>在<code>theme/Butterfly/source/js</code>文件夹下添加<code>crash_cheat.js</code>文件<br>填入以下内容<code>记得要修改你喜欢的标题</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">var OriginTitle &#x3D; document.title;</span><br><span class="line"> var titleTime;</span><br><span class="line"> document.addEventListener(&#39;visibilitychange&#39;, function () &#123;</span><br><span class="line">     if (document.hidden) &#123;</span><br><span class="line">         $(&#39;[rel&#x3D;&quot;icon&quot;]&#39;).attr(&#39;href&#39;, &quot;&#x2F;joke.ico&quot;);</span><br><span class="line">         document.title &#x3D; &#39;看不见我🙈~看不见我🙈~&#39;;</span><br><span class="line">         clearTimeout(titleTime);</span><br><span class="line">     &#125;</span><br><span class="line">     else &#123;</span><br><span class="line">         $(&#39;[rel&#x3D;&quot;icon&quot;]&#39;).attr(&#39;href&#39;, &quot;&#x2F;favicon.ico&quot;);</span><br><span class="line">         document.title &#x3D; &#39; ( ๑•̀ㅂ•́) ✧被发现了～&#39;;</span><br><span class="line">         titleTime &#x3D; setTimeout(function () &#123;</span><br><span class="line">             document.title &#x3D; OriginTitle;</span><br><span class="line">         &#125;, 2000);</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;);</span><br></pre></td></tr></table></figure><p>在<code>Butterfly/layout/includes/layout.pug</code>中添加以下代码来引入</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">script(type&#x3D;&#39;text&#x2F;javascript&#39;, src&#x3D;&#39;&#x2F;js&#x2F;crash_cheat.js&#39;)</span><br></pre></td></tr></table></figure><h3><span id="添加标签云">添加标签云</span></h3><p>使用命令进行安装插件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install hexo-tag-cloud --save</span><br></pre></td></tr></table></figure><p>打开<code>Butterfly/layout/includes/widget/card_tags.pug</code>文件，用下面内容将其替换掉，最好把之前的文件备份一下,防止后悔</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">if site.tags.length</span><br><span class="line">  .card-widget.card-tags</span><br><span class="line">    .card-content</span><br><span class="line">      .item-headline</span><br><span class="line">        i.fa.fa-tags(aria-hidden&#x3D;&quot;true&quot;)</span><br><span class="line">        span&#x3D; _p(&#39;aside.card_tags&#39;)</span><br><span class="line">        script(type&#x3D;&quot;text&#x2F;javascript&quot; charset&#x3D;&quot;utf-8&quot; src&#x3D;&quot;&#x2F;js&#x2F;tagcloud.js&quot;)</span><br><span class="line">        script(type&#x3D;&quot;text&#x2F;javascript&quot; charset&#x3D;&quot;utf-8&quot; src&#x3D;&quot;&#x2F;js&#x2F;tagcanvas.js&quot;)</span><br><span class="line">        #myCanvasContainer.widget.tagcloud(align&#x3D;&#39;center&#39;)</span><br><span class="line">          canvas#resCanvas(width&#x3D;&#39;200&#39;, height&#x3D;&#39;200&#39;, style&#x3D;&#39;width&#x3D;100%&#39;)</span><br><span class="line">            !&#x3D; tagcloud()</span><br><span class="line">          !&#x3D; tagcloud(&#123;min_font: 16, max_font: 24, amount: 50, color: true, start_color: &#39;#999&#39;, end_color: &#39;#99a9bf&#39;&#125;)</span><br></pre></td></tr></table></figure><h3><span id="添加个性化板娘">添加个性化板娘</span></h3><blockquote><p>由<a href="https://github.com/stevenjoezhang/live2d-widget" target="_blank" rel="noopener">stevenjoezhang</a> 魔改项目<br>最简单引用方式在<code>Butterfly/_config.yml</code>中<code>inject</code>添加</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">inject:</span><br><span class="line">   head:</span><br><span class="line">     - &lt;link rel&#x3D;&quot;stylesheet&quot; href&#x3D;&quot;https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;npm&#x2F;font-awesome&#x2F;css&#x2F;font-awesome.min.css&quot;&gt;</span><br><span class="line">   bottom:</span><br><span class="line">     - &lt;script src&#x3D;&quot;https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;gh&#x2F;stevenjoezhang&#x2F;live2d-widget@latest&#x2F;autoload.js&quot;&gt;&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure><h3><span id="添加访客地图">添加访客地图</span></h3><p>前往 <a href="https://clustrmaps.com/" target="_blank" rel="noopener">clustrmaps</a> 网站注册一个帐号</p><p>找到 <code>Free Tools</code> 下面的 <code>Website Widget</code>, 点击 <code>Get Map Widget</code></p><p>输入你的博客网址，点击 <code>Next</code></p><p>根据你自己的喜好选择样式 <code>Map widget</code> 或 <code>Globe Widget</code></p><p>找到如下代码，记住 <code>src (****** 的部分)</code>:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type&#x3D;&quot;text&#x2F;javascript&quot; id&#x3D;&quot;clstr_globe&quot; src&#x3D;&quot;**********************&quot;&gt;</span><br></pre></td></tr></table></figure><p>在 <code>themes/butterfly/layout/includes/widget/</code> 文件夹新建 <code>card_map.pug</code> 文件，文件内容如下:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.card-widget.card-map</span><br><span class="line">  .card-content</span><br><span class="line">    .item-headline</span><br><span class="line">      i.fa.fa-globe-asia(aria-hidden&#x3D;&quot;true&quot;)</span><br><span class="line">      span&#x3D; _p(&#39;aside.card_map&#39;)</span><br><span class="line">    script#clstr_globe(type&#x3D;&quot;text&#x2F;javascript&quot; defer&#x3D;&quot;defer&quot; src&#x3D;&quot;此处填入你自己的代码&quot;)</span><br></pre></td></tr></table></figure><p>编辑 <code>themes/butterfly/layout/includes/widget/index.pug</code> 文件，在你想要显示的位置插入以下代码:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if theme.aside.card_map</span><br><span class="line">        !&#x3D;partial(&#39;includes&#x2F;widget&#x2F;card_map&#39;, &#123;&#125;, &#123;cache:theme.fragment_cache&#125;)</span><br></pre></td></tr></table></figure><img src= "/img/loading.gif" data-src="http://qiniu.webpages.show/images/card1.jpg"><blockquote><p>注意格式</p></blockquote><p>编辑 <code>butterfly/_config.yml</code> 文件，在 <code>card_webinfo</code> 下面添加一行 <code>card_map: true</code></p><img src= "/img/loading.gif" data-src="http://qiniu.webpages.show/images/card2.jpg"><p>编辑 <code>themes/Butterfly/languages/zh-CN.yml</code> 文件 (请根据你的网站语言选择)，找到 <code>aside</code> 下对应格式添加 <code>card_map: 访客地图</code> (后面的文本可自定义)</p><img src= "/img/loading.gif" data-src="http://qiniu.webpages.show/images/card3.jpg"><p>如果不想显示，直接把 <code>butterfly/_config.yml</code> 文件的 <code>card_map: true</code> 改为 <code>card_map: false</code> 即可</p><h3><span id="页脚跳动的">页脚跳动的♥</span></h3><p>编辑博客根目录<code>themes/Butterfly/layout/includes/footer.pug</code>文件，将</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&amp;copy;$&#123;theme.since&#125; - $&#123;nowYear&#125; By $&#123;config.author&#125;</span><br></pre></td></tr></table></figure><p>改为</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&amp;copy;$&#123;theme.since&#125; - $&#123;nowYear + &#39; &#39;&#125; &lt;i id&#x3D;&quot;heartbeat&quot; class&#x3D;&quot;fa fas fa-heartbeat&quot;&gt;&lt;&#x2F;i&gt; $&#123;config.author&#125;</span><br></pre></td></tr></table></figure><p>将</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&amp;copy;$&#123;nowYear&#125; By $&#123;config.author&#125;</span><br></pre></td></tr></table></figure><p>改为</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&amp;copy;$&#123;nowYear + &#39; &#39;&#125; &lt;i id&#x3D;&quot;heartbeat&quot; class&#x3D;&quot;fa fas fa-heartbeat&quot;&gt;&lt;&#x2F;i&gt; $&#123;config.author&#125;</span><br></pre></td></tr></table></figure><p>编辑<code>butterfly.yml</code>文件</p><p>在<code>inject-&gt;head</code>下面添加如下内容：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- &lt;link rel&#x3D;&quot;stylesheet&quot; href&#x3D;&quot;https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;gh&#x2F;HCLonely&#x2F;images@master&#x2F;others&#x2F;heartbeat.min.css&quot;&gt;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3&gt;&lt;span id=&quot;樱花飘落背景&quot;&gt;樱花飘落背景&lt;/span&gt;&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;s
      
    
    </summary>
    
    
      <category term="hexo" scheme="https://www.webpages.show/categories/hexo/"/>
    
    
      <category term="hexo" scheme="https://www.webpages.show/tags/hexo/"/>
    
      <category term="butterfly" scheme="https://www.webpages.show/tags/butterfly/"/>
    
  </entry>
  
  <entry>
    <title>hexo-douban 插件使用与问题</title>
    <link href="https://www.webpages.show/p/2651b0bd/"/>
    <id>https://www.webpages.show/p/2651b0bd/</id>
    <published>2020-07-27T03:18:13.044Z</published>
    <updated>2020-07-28T09:19:03.093Z</updated>
    
    <content type="html"><![CDATA[<h1><span id="hexo-douban">hexo-douban</span></h1><p>一个在 <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> 页面中嵌入豆瓣个人主页的小插件.</p><h3><span id="安装">安装</span></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-douban --save</span><br></pre></td></tr></table></figure><h3><span id="配置">配置</span></h3><p>将下面的配置写入站点的配置文件 <code>_config.yml</code> 里(不是主题的配置文件).</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">douban:</span></span><br><span class="line">  <span class="attr">user:</span> <span class="string">mythsman</span></span><br><span class="line">  <span class="attr">builtin:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">book:</span></span><br><span class="line">    <span class="attr">title:</span> <span class="string">'This is my book title'</span></span><br><span class="line">    <span class="attr">quote:</span> <span class="string">'This is my book quote'</span></span><br><span class="line">  <span class="attr">movie:</span></span><br><span class="line">    <span class="attr">title:</span> <span class="string">'This is my movie title'</span></span><br><span class="line">    <span class="attr">quote:</span> <span class="string">'This is my movie quote'</span></span><br><span class="line">  <span class="attr">game:</span></span><br><span class="line">    <span class="attr">title:</span> <span class="string">'This is my game title'</span></span><br><span class="line">    <span class="attr">quote:</span> <span class="string">'This is my game quote'</span></span><br><span class="line">  <span class="attr">timeout:</span> <span class="number">10000</span></span><br></pre></td></tr></table></figure><ul><li><strong>user</strong>: 你的豆瓣ID.打开豆瓣，登入账户，然后在右上角点击 “个人主页” ，这时候地址栏的URL大概是这样：”<a href="https://www.douban.com/people/xxxxxx/&quot;" target="_blank" rel="noopener">https://www.douban.com/people/xxxxxx/&quot;</a> ，其中的”xxxxxx”就是你的个人ID了。</li><li><strong>builtin</strong>: 是否将生成页面的功能嵌入<code>hexo s</code>和<code>hexo g</code>中，默认是<code>false</code>,另一可选项为<code>true</code>(1.x.x版本新增配置项)。</li><li><strong>title</strong>: 该页面的标题.</li><li><strong>quote</strong>: 写在页面开头的一段话,支持html语法.</li><li><strong>timeout</strong>: 爬取数据的超时时间，默认是 10000ms ,如果在使用时发现报了超时的错(ETIMEOUT)可以把这个数据设置的大一点。</li></ul><p>如果只想显示某一个页面(比如movie)，那就把其他的配置项注释掉即可。</p><h2><span id="使用">使用</span></h2><h3><span id="1xx版本">1.x.x版本</span></h3><p>在0.x.x版本中，文章的更新和豆瓣页面的爬取操作是绑定在一起的，无法支持单独更新文章或者单独爬取文章。</p><p>在1.x.x版本中，使用<code>hexo douban</code>命令即可生成指定页面，如果不加参数，那么默认参数为<code>-bgm</code>。</p><p><strong>需要注意的是</strong>，通常大家都喜欢用<code>hexo d</code>来作为<code>hexo deploy</code>命令的简化，但是当安装了<code>hexo douban</code>之后，就不能用<code>hexo d</code>了，因为<code>hexo douban</code>跟<code>hexo deploy</code>的前缀都是<code>hexo d</code>。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ hexo douban -h</span><br><span class="line">Usage: hexo douban</span><br><span class="line"></span><br><span class="line">Description:</span><br><span class="line">Generate pages from douban</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">  -b, --books   Generate douban books only</span><br><span class="line">  -g, --games   Generate douban games only</span><br><span class="line">  -m, --movies  Generate douban movies only</span><br></pre></td></tr></table></figure><p>如果配置了<code>builtin</code>参数为<code>true</code>，那么除了可以使用<code>hexo douban</code>命令之外，<code>hexo g</code>或<code>hexo s</code>也内嵌了生成页面的功能。</p><h3><span id="0xx版本">0.x.x版本</span></h3><p>直接使用命令<code>hexo g</code>即在生成静态页面前爬取豆瓣数据，如果使用<code>hexo s</code>则会监听文件变动，每有一次变动就会重新爬取数据。</p><h3><span id="升级">升级</span></h3><p>我会不定期更新一些功能或者修改一些Bug，所以如果想使用最新的特性，可以用下面的方法来更新:</p><ol><li>修改package.json内hexo-douban的版本号至最新</li><li>重新安装最新版本<code>npm install hexo-douban --save</code></li></ol><p>或者使用<code>npm install hexo-douban --update --save</code>直接更新。</p><h3><span id="显示">显示</span></h3><p>如果上面的配置和操作都没问题，就可以在生成站点之后打开 <code>//yourblog/books</code> 和 <code>//yourblog/movies</code>, <code>//yourblog/games</code>, 来查看结果.</p><h3><span id="菜单">菜单</span></h3><p>如果上面的显示没有问题就可以在主题的配置文件 <code>_config.yml</code> 里添加如下配置来为这些页面添加菜单链接.</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="attr">Home:</span> <span class="string">/</span></span><br><span class="line">  <span class="attr">Archives:</span> <span class="string">/archives</span></span><br><span class="line">  <span class="attr">Books:</span> <span class="string">/books</span>     <span class="comment">#This is your books page</span></span><br><span class="line">  <span class="attr">Movies:</span> <span class="string">/movies</span>   <span class="comment">#This is your movies page</span></span><br><span class="line">  <span class="attr">Games:</span> <span class="string">/games</span>   <span class="comment">#This is your games page</span></span><br></pre></td></tr></table></figure><h3><span id="遇到的问题">遇到的问题</span></h3><ol><li>关于将builtin设置为true或者false的问题<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">设置为true</span><br><span class="line">直接使用命令&#96;hexo g&#96;即在生成静态页面前爬取豆瓣数据，不需要先执行 hexo douban</span><br></pre></td></tr></table></figure></li><li>关于报<code>userid</code> 设置完成，<code>hexo g</code> 抓取不到信息的问题<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">0 books have been loaded in 3066 ms, because you are offline or your network is bad</span><br><span class="line">0 movies have been loaded in 3041 ms, because you are offline or your network is bad</span><br></pre></td></tr></table></figure><code>timeout</code> 配置为 <code>timeout: 10000</code></li></ol><p>解决方式</p><p>尝试使用别的nodejs版本，之前用的14.xx.xx版本的不行，卸载nodejs，安装12.18.0版本解决。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1&gt;&lt;span id=&quot;hexo-douban&quot;&gt;hexo-douban&lt;/span&gt;&lt;/h1&gt;&lt;p&gt;一个在 &lt;a href=&quot;https://hexo.io&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/a&gt; 页面中嵌入豆瓣个人主页的小插件.&lt;
      
    
    </summary>
    
    
      <category term="hexo" scheme="https://www.webpages.show/categories/hexo/"/>
    
    
      <category term="hexo" scheme="https://www.webpages.show/tags/hexo/"/>
    
      <category term="douban" scheme="https://www.webpages.show/tags/douban/"/>
    
  </entry>
  
  <entry>
    <title>记一次Centos7.5升级OpenSSH8.0p1</title>
    <link href="https://www.webpages.show/p/12223247/"/>
    <id>https://www.webpages.show/p/12223247/</id>
    <published>2020-07-26T06:27:20.248Z</published>
    <updated>2020-07-27T03:25:21.378Z</updated>
    
    <content type="html"><![CDATA[<p>服务器版本：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># cat &#x2F;etc&#x2F;redhat-release</span><br><span class="line">CentOS Linux release 7.5.1804 (Core)</span><br></pre></td></tr></table></figure><p>升级前ssh版本：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># ssh -V</span><br><span class="line">OpenSSH_7.4p1, OpenSSL 1.0.2k-fips  26 Jan 2017</span><br></pre></td></tr></table></figure><p>升级后ssh版本：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># ssh -V</span><br><span class="line">OpenSSH_8.0p1, OpenSSL 1.0.2k-fips  26 Jan 2017</span><br></pre></td></tr></table></figure><p>为防止升级失败无法远程连接，安装telnet：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># yum install -y telnet-server</span><br><span class="line"># yum install -y xinetd</span><br><span class="line"># systemctl start telnet.socket</span><br><span class="line"># systemctl start  xinetd</span><br></pre></td></tr></table></figure><p>允许root登录：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># echo &#39;pts&#x2F;0&#39; &gt;&gt;&#x2F;etc&#x2F;securetty</span><br><span class="line"># echo &#39;pts&#x2F;1&#39; &gt;&gt;&#x2F;etc&#x2F;securetty</span><br><span class="line"># systemctl restart telnet.socket</span><br></pre></td></tr></table></figure><p>开启telnet和xinetd开机自动启动，避免reboot后连不上Telnet：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># systemctl enable xinetd.service</span><br><span class="line"># systemctl enable telnet.socket</span><br></pre></td></tr></table></figure><p>测试一下telnet连接，然后就可以先放着了，这只是以防万一，接下来还是正常使用ssh连接操作</p><p>下载最新版本的包（openssh-8.0p1.tar.gz）并上传到服务器上</p><p>备份文件：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># cp -r &#x2F;etc&#x2F;ssh &#x2F;etc&#x2F;ssh.old</span><br></pre></td></tr></table></figure><p>卸载旧的ssh：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># rpm -qa|grep openssh</span><br><span class="line">openssh-server-7.4p1-11.el7.x86_64</span><br><span class="line">openssh-7.4p1-11.el7.x86_64</span><br><span class="line">openssh-clients-7.4p1-11.el7.x86_64</span><br><span class="line"># rpm -e --nodeps openssh-server-7.4p1-11.el7.x86_64</span><br><span class="line"># rpm -e --nodeps openssh-7.4p1-11.el7.x86_64</span><br><span class="line"># rpm -e --nodeps openssh-clients-7.4p1-11.el7.x86_64</span><br><span class="line"># rpm -qa|grep openssh</span><br></pre></td></tr></table></figure><p>安装：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># install -v -m700 -d &#x2F;var&#x2F;lib&#x2F;sshd</span><br><span class="line"># chown -v root:sys &#x2F;var&#x2F;lib&#x2F;sshd</span><br><span class="line"># groupadd -g 50 sshd</span><br><span class="line"># useradd -c &#39;sshd PrivSep&#39; -d &#x2F;var&#x2F;lib&#x2F;sshd -g sshd -s &#x2F;bin&#x2F;false -u 50 sshd</span><br><span class="line"># tar -zxvf openssh-8.0p1.tar.gz</span><br><span class="line"># cd openssh-8.0p1</span><br><span class="line"># .&#x2F;configure --prefix&#x3D;&#x2F;usr --sysconfdir&#x3D;&#x2F;etc&#x2F;ssh --with-md5-passwords --with-privsep-path&#x3D;&#x2F;var&#x2F;lib&#x2F;sshd</span><br><span class="line"># make</span><br><span class="line"># chmod 600 &#x2F;etc&#x2F;ssh&#x2F;ssh_host_rsa_key</span><br><span class="line"># chmod 600 &#x2F;etc&#x2F;ssh&#x2F;ssh_host_ecdsa_key</span><br><span class="line"># chmod 600 &#x2F;etc&#x2F;ssh&#x2F;ssh_host_ed25519_key</span><br><span class="line"># make install</span><br><span class="line"># install -v -m755 contrib&#x2F;ssh-copy-id &#x2F;usr&#x2F;bin</span><br><span class="line"># install -v -m644 contrib&#x2F;ssh-copy-id.1 &#x2F;usr&#x2F;share&#x2F;man&#x2F;man1</span><br><span class="line"># install -v -m755 -d &#x2F;usr&#x2F;share&#x2F;doc&#x2F;openssh-8.0p1</span><br><span class="line"># install -v -m644 INSTALL LICENCE OVERVIEW README* &#x2F;usr&#x2F;share&#x2F;doc&#x2F;openssh-8.0p1</span><br></pre></td></tr></table></figure><p>设置允许root登录：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># echo &quot;PermitRootLogin yes&quot; &gt;&gt; &#x2F;etc&#x2F;ssh&#x2F;sshd_config</span><br></pre></td></tr></table></figure><p>设置开机自启动：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># cp -p contrib&#x2F;redhat&#x2F;sshd.init &#x2F;etc&#x2F;init.d&#x2F;sshd</span><br><span class="line"># chmod +x &#x2F;etc&#x2F;init.d&#x2F;sshd</span><br><span class="line"># chkconfig --add sshd</span><br><span class="line"># chkconfig sshd on</span><br><span class="line"># chkconfig --list sshd</span><br><span class="line"># systemctl restart sshd</span><br></pre></td></tr></table></figure><p>升级完成，查看版本：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># ssh -V</span><br><span class="line">OpenSSH_8.0p1, OpenSSL 1.0.2k-fips  26 Jan 2017</span><br></pre></td></tr></table></figure><p>PS1：升级完成后别忘了恢复以前的telnet设置或关闭telnet.</p><p>PS2：如果中间有问题升级失败，且之前是rpm包安装的，可以直接以下命令进行回滚：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># yum -y install openssh-clients</span><br><span class="line"># yum -y install openssh-server</span><br><span class="line"># yum -y install openssh</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;服务器版本：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;
      
    
    </summary>
    
    
      <category term="OpenSSH" scheme="https://www.webpages.show/categories/OpenSSH/"/>
    
    
      <category term="OpenSSh" scheme="https://www.webpages.show/tags/OpenSSh/"/>
    
  </entry>
  
  <entry>
    <title>gitlab配置域名并https访问</title>
    <link href="https://www.webpages.show/p/5e94d2a7/"/>
    <id>https://www.webpages.show/p/5e94d2a7/</id>
    <published>2020-07-24T04:07:59.376Z</published>
    <updated>2020-07-26T10:29:49.524Z</updated>
    
    <content type="html"><![CDATA[<h3><span id="gitlab默认nginx80端口">Gitlab默认Nginx80端口</span></h3><p>如果机器未占有80端口，可以直接替换成域名，解析后就可以直接访问。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">grep &quot;^external_url&quot; &#x2F;etc&#x2F;gitlab&#x2F;gitlab.rb #查看当前绑定的域名或者IP</span><br><span class="line">vim &#x2F;etc&#x2F;gitlab&#x2F;gitlab.rb   #打开配置文件</span><br><span class="line"># external_url &#39;http:&#x2F;&#x2F;192.168.174.131&#39;  #替换   #修改成域名访问</span><br><span class="line">external_url &#39;http:&#x2F;&#x2F;gitlab.inewmaker.com&#39;  </span><br><span class="line">gitlab-ctl reconfigure   #重新跑一下配置</span><br></pre></td></tr></table></figure><p>如果机器80端口以占有，需要修改gitlab端口。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">grep &quot;&#39;listen_port&quot; &#x2F;etc&#x2F;gitlab&#x2F;gitlab.rb   #查看默认端口</span><br><span class="line">vim &#x2F;etc&#x2F;gitlab&#x2F;gitlab.rb   #打开配置文件</span><br><span class="line">nginx[&#39;listen_port&#39;] &#x3D; 800     #找到取消注释，修改端口</span><br><span class="line">gitlab-ctl reconfigure   #重新跑一下配置</span><br></pre></td></tr></table></figure><p>由于更改端口，域名解析不到。提供方式使用云服务中的负载均衡。</p><h3><span id="gitlab配置https">Gitlab配置HTTPS</span></h3><p>   注：<br>   gitlab最新是开启https会自动配置，但只有三个月有效期<br>   使用自己设的加密证书应设置</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">使用自己设的加密证书应设置</span><br><span class="line">vim &#x2F;etc&#x2F;gitlab&#x2F;gitlab.rb</span><br><span class="line"></span><br><span class="line">letsencrypt[&#39;enable&#39;] &#x3D; false</span><br><span class="line">letsencrypt[&#39;auto_renew&#39;] &#x3D; false</span><br></pre></td></tr></table></figure><pre><code>在/etc/gitlab/gitlab.rb禁用自动更新。否则，gitlab-ctl reconfigure 可能会尝试更新证书，从而覆盖它们。如果gitlab自签的证书过期，替换的一定要禁用自动更新</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mkdir &#x2F;etc&#x2F;gitlab&#x2F;ssl   #把申请的证书放在这里</span><br><span class="line">vim  &#x2F;etc&#x2F;gitlab&#x2F;gitlab.rb   #打开配置文件</span><br><span class="line">external_url &#39;external_url &#39;https:&#x2F;&#x2F;gitlab.inewmaker.com&#39;  # 注：一定要HTTPS</span><br><span class="line">nginx[&#39;redirect_http_to_https&#39;]&#x3D; true   #取消注释改为 true</span><br><span class="line">nginx[&#39;ssl_certificate&#39;] &#x3D; &quot;&#x2F;etc&#x2F;gitlab&#x2F;ssl&#x2F;gitlab.pem&quot;    #放置对应的证书密钥</span><br><span class="line">nginx[&#39;ssl_certificate_key&#39;] &#x3D; &quot;&#x2F;etc&#x2F;gitlab&#x2F;ssl&#x2F;gitlab.key&quot; #放置对应的证书密钥</span><br><span class="line">gitlab-ctl reconfigure  #使配置生效</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gitlab-ctl restart  # 使配置生效 #</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3&gt;&lt;span id=&quot;gitlab默认nginx80端口&quot;&gt;Gitlab默认Nginx80端口&lt;/span&gt;&lt;/h3&gt;&lt;p&gt;如果机器未占有80端口，可以直接替换成域名，解析后就可以直接访问。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;tabl
      
    
    </summary>
    
    
      <category term="Gitlab" scheme="https://www.webpages.show/categories/Gitlab/"/>
    
    
      <category term="Gitlab" scheme="https://www.webpages.show/tags/Gitlab/"/>
    
      <category term="https" scheme="https://www.webpages.show/tags/https/"/>
    
  </entry>
  
  <entry>
    <title>nginx 返回码 426 upgrade required 处理</title>
    <link href="https://www.webpages.show/p/328665dd/"/>
    <id>https://www.webpages.show/p/328665dd/</id>
    <published>2020-07-23T05:18:35.625Z</published>
    <updated>2020-07-26T10:46:00.136Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">426 upgrade required</span><br><span class="line"></span><br><span class="line">请求返回 426</span><br><span class="line"></span><br><span class="line">nginx 反向代理默认走的http 1.0版本</span><br><span class="line"></span><br><span class="line">但是 被反向代理的服务器是1.1版本的!</span><br><span class="line"></span><br><span class="line">so 在反向代理的时候加上一句</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">proxy_http_version 1.1;</span><br></pre></td></tr></table></figure><p>实例</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">   location ~* \.do &#123;</span><br><span class="line">                #if ($http_x_forwarded_proto !&#x3D; &quot;https&quot;) &#123;</span><br><span class="line">                #      rewrite ^(.*)$ https:&#x2F;&#x2F;$server_name$1 permanent;</span><br><span class="line">                #&#125;</span><br><span class="line">               proxy_http_version 1.1;</span><br><span class="line">               proxy_pass http:&#x2F;&#x2F;test-h5-api.7dian7fen.com;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class
      
    
    </summary>
    
    
      <category term="Nginx" scheme="https://www.webpages.show/categories/Nginx/"/>
    
    
      <category term="nginx" scheme="https://www.webpages.show/tags/nginx/"/>
    
      <category term="返回码" scheme="https://www.webpages.show/tags/%E8%BF%94%E5%9B%9E%E7%A0%81/"/>
    
  </entry>
  
</feed>
